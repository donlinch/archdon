<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Walker - 風格模板與地圖管理</title>
    <!-- 你需要創建 admin-style.css 來美化介面 -->
    <link rel="stylesheet" href="admin-style.css">
    
</head>

    <body>
        <div class="admin-container">
            <h1>Simple Walker - 風格模板與地圖管理</h1>
    
            <!-- 模板選擇區 -->
            <div class="template-selector">
                <label for="template-select">選擇模板:</label>
                <select id="template-select">
                    <option value="">-- 請選擇或新增 --</option>
                    <!-- JS 載入選項 -->
                </select>
                <button id="load-template-btn">載入編輯</button>
                <button id="new-template-btn">新增模板</button>
            </div>
            <hr>
    
            <!-- 模板編輯器 -->
            <div id="template-editor" class="hidden">
                <h2>編輯模板樣式 (修改會即時預覽下方地圖)</h2>
                <div class="form-group"> <label for="template-id">模板 ID (不可修改):</label> <input type="text" id="template-id" readonly style="background-color:#e9ecef;"> </div>
                <div class="form-group"> <label for="template-name">模板名稱:</label> <input type="text" id="template-name"> </div>
                <div class="form-group"> <label for="template-description">模板描述:</label> <textarea id="template-description" rows="2"></textarea> </div>
    
                <fieldset>
                    <legend>[全局樣式]</legend>
                    <div class="form-group"> <label for="general-pageBgColor">頁面背景色:</label> <input type="color" id="general-pageBgColor"> </div>
                    <div class="form-group"> <label for="general-primaryTextColor">主要文字顏色:</label> <input type="color" id="general-primaryTextColor"> </div>
                    <div class="form-group"> <label for="general-primaryFontFamily">主要字體:</label> <input type="text" id="general-primaryFontFamily"> </div>
                </fieldset>
                <fieldset>
                    <legend>[遊戲標題區]</legend>
                    <div class="form-group"> <label for="header-headerBgColor">標題背景色:</label> <input type="color" id="header-headerBgColor"> </div>
                    <div class="form-group"> <label for="header-headerTextColor">標題文字色:</label> <input type="color" id="header-headerTextColor"> </div>
                    <div class="form-group"> <label for="header-roomInfoColor">房間資訊文字色:</label> <input type="color" id="header-roomInfoColor"> </div>
                </fieldset>
                <fieldset>
                    <legend>[遊戲地圖區]</legend>
                    <div class="form-group"> <label for="board-borderColor">地圖外框線顏色:</label> <input type="color" id="board-borderColor"> </div>
                    <div class="form-group"> <label for="board-borderWidth">地圖外框線寬度:</label> <input type="text" id="board-borderWidth"> </div>
                    <div class="form-group"> <label for="board-centerBgColor">地圖中央背景色:</label> <input type="color" id="board-centerBgColor"> </div>
                    <div class="form-group"> <label for="board-centerImageUrl">地圖中央圖片 URL:</label> <input type="url" id="board-centerImageUrl"> </div>
                </fieldset>
                 <fieldset>
                    <legend>[地圖格子]</legend>
                    <div class="form-group"> <label for="mapCell-defaultBgColor">預設背景色:</label> <input type="color" id="mapCell-defaultBgColor"> </div>
                    <div class="form-group"> <label for="mapCell-defaultBorderColor">預設邊框顏色:</label> <input type="color" id="mapCell-defaultBorderColor"> </div>
                    <div class="form-group"> <label for="mapCell-defaultBorderWidth">預設邊框寬度:</label> <input type="text" id="mapCell-defaultBorderWidth"> </div>
                    <div class="form-group"> <label for="mapCell-titleTextColor">標題文字色:</label> <input type="color" id="mapCell-titleTextColor"> </div>
                    <div class="form-group"> <label for="mapCell-numberTextColor">編號文字色:</label> <input type="color" id="mapCell-numberTextColor"> </div>
                    <div class="form-group"> <label for="mapCell-hoverBgColor">懸停背景色:</label> <input type="color" id="mapCell-hoverBgColor"> </div>
                    <div class="form-group"> <label for="mapCell-hoverBorderColor">懸停邊框色:</label> <input type="color" id="mapCell-hoverBorderColor"> </div>
                </fieldset>
                 <fieldset>
                    <legend>[玩家標記]</legend>
                    <div class="form-group"> <label for="playerMarker-shape">形狀 (border-radius):</label> <input type="text" id="playerMarker-shape"> </div>
                    <div class="form-group"> <label for="playerMarker-textColor">文字色:</label> <input type="color" id="playerMarker-textColor"> </div>
                    <div class="form-group"> <label for="playerMarker-boxShadow">陰影 (CSS):</label> <input type="text" id="playerMarker-boxShadow"> </div>
                    <div class="form-group player-color-group"> <label>玩家顏色組:</label> <div> <input type="color" id="playerMarker-color1"> <input type="color" id="playerMarker-color2"> <input type="color" id="playerMarker-color3"> <input type="color" id="playerMarker-color4"> <input type="color" id="playerMarker-color5"> </div> </div>
                </fieldset>
                <fieldset>
                    <legend>[控制區]</legend>
                     <div class="form-group"> <label for="controller-panelBackground">面板背景色:</label> <input type="color" id="controller-panelBackground"> </div>
                     <div class="form-group"> <label for="controller-playerLabelColor">'玩家:' 文字色:</label> <input type="color" id="controller-playerLabelColor"> </div>
                     <fieldset> <legend>控制按鈕</legend> <div class="form-group"> <label for="controller-button-defaultBgColor">背景色:</label> <input type="color" id="controller-button-defaultBgColor"> </div> <div class="form-group"> <label for="controller-button-defaultTextColor">文字色:</label> <input type="color" id="controller-button-defaultTextColor"> </div> <div class="form-group"> <label for="controller-button-borderRadius">圓角:</label> <input type="text" id="controller-button-borderRadius"> </div> <div class="form-group"> <label for="controller-button-hoverBgColor">懸停背景色:</label> <input type="color" id="controller-button-hoverBgColor"> </div> <div class="form-group"> <label for="controller-button-cooldownOpacity">冷卻透明度:</label> <input type="text" id="controller-button-cooldownOpacity"> </div> </fieldset>
                </fieldset>
                <fieldset>
                     <legend>[資訊區]</legend>
                     <div class="form-group"> <label for="info-panelBackground">面板背景色:</label> <input type="color" id="info-panelBackground"> </div>
                     <div class="form-group"> <label for="info-sectionTitleColor">區塊標題色:</label> <input type="color" id="info-sectionTitleColor"> </div>
                     <div class="form-group"> <label for="info-playerListText">玩家列表文字色:</label> <input type="color" id="info-playerListText"> </div>
                     <div class="form-group"> <label for="info-staticTextColor">靜態文字色:</label> <input type="color" id="info-staticTextColor"> </div>
                     <fieldset> <legend>離開按鈕</legend> <div class="form-group"> <label for="info-leaveButton-defaultBgColor">背景色:</label> <input type="color" id="info-leaveButton-defaultBgColor"> </div> <div class="form-group"> <label for="info-leaveButton-defaultTextColor">文字色:</label> <input type="color" id="info-leaveButton-defaultTextColor"> </div> </fieldset>
                </fieldset>
                <fieldset>
                    <legend>[地點彈窗 (預設)]</legend>
                     <div class="form-group"> <label for="modal-overlayBgColor">遮罩背景色(rgba):</label> <input type="text" id="modal-overlayBgColor"> </div>
                     <div class="form-group"> <label for="modal-contentBgColor">內容背景色:</label> <input type="color" id="modal-contentBgColor"> </div>
                     <div class="form-group"> <label for="modal-headerBgColor">頭部背景色:</label> <input type="color" id="modal-headerBgColor"> </div>
                     <div class="form-group"> <label for="modal-headerTextColor">頭部文字色:</label> <input type="color" id="modal-headerTextColor"> </div>
                     <div class="form-group"> <label for="modal-bodyTextColor">內文文字色:</label> <input type="color" id="modal-bodyTextColor"> </div>
                </fieldset>
    
                <button id="save-template-btn" class="btn-primary">儲存模板樣式</button>
                <button id="delete-template-btn" class="btn-danger hidden">刪除此模板</button>
            </div>
            <hr>
    
            <!-- 地圖格子編輯器 -->
            <div id="cell-editor">
                <h2>編輯地圖格子 (點擊下方格子進行編輯)</h2>
                <p>(格子顏色設定將覆蓋模板預設值，清除顏色則使用模板預設)</p>
                <div id="admin-map-grid-container">
                    <div id="admin-map-grid">
                        <!-- JS 動態生成 7x7 預覽格子 -->
                    </div>
                     <!-- 中央圖片預覽層 -->
                     <div id="admin-map-center-image"></div>
                </div>
                <button id="save-all-cell-data-btn" class="btn-primary">儲存所有格子變更</button>
            </div>
    
            <!-- 狀態訊息 -->
            <div id="status-message"></div>
        </div>
    
        <!-- 格子編輯彈窗 -->
        <div id="cell-edit-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modal-cell-title-display">編輯格子 <span id="modal-cell-index-display"></span></h2>
                    <button class="close-modal-btn" onclick="closeCellEditModal()" title="關閉">×</button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editing-cell-index">
                    <div class="form-group"> <label for="modal-cell-title-input">標題:</label> <input type="text" id="modal-cell-title-input"> </div>
                    <div class="form-group"> <label for="modal-cell-desc-textarea">內文描述:</label> <textarea id="modal-cell-desc-textarea" rows="4"></textarea> </div>
                    <hr>
                    <div class="form-group"> <label for="modal-cell-bg-color-input">格子背景色:</label> <input type="color" id="modal-cell-bg-color-input"> <button onclick="clearColorInput('modal-cell-bg-color-input')">清除 (使用預設)</button> </div>
                    <div class="form-group"> <label for="modal-modal-header-bg-color-input">地點彈窗頭部背景色:</label> <input type="color" id="modal-modal-header-bg-color-input"> <button onclick="clearColorInput('modal-modal-header-bg-color-input')">清除 (使用預設)</button> </div>
                </div>
                <div class="modal-footer">
                    <button id="save-modal-changes-btn" class="btn-primary">儲存此格變更</button>
                    <button onclick="closeCellEditModal()">取消</button>
                </div>
            </div>
        </div>
    
        <script src="rich-admin.js"></script>
        <script>
            // 全域輔助函數
            function closeCellEditModal() { document.getElementById('cell-edit-modal').classList.add('hidden'); }
            function clearColorInput(inputId) {
                const input = document.getElementById(inputId);
                if (input) { input.value = '#ffffff'; input.dataset.cleared = 'true'; } // 視覺重置並標記
            }
        </script>
    </body>
    </html>