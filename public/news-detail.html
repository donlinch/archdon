<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SunnyYummy 新聞詳情</title> <!-- JS 會動態修改 -->

    <!-- 絕對路徑 CSS -->
    <link rel="stylesheet" href="/style.css">

    <!-- Favicon and PWA icons (使用絕對路徑) -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Swiper for carousel -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <!-- Open Graph Meta 標籤 (重要 for Facebook) -->
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="SunnyYummy" />
    <meta property="og:title" content="SunnyYummy 新聞" /> <!-- 通用標題, JS 會更新 -->
    <meta property="og:description" content="查看 SunnyYummy 最新消息與活動！" /> <!-- 通用描述, JS 可更新 -->
    <meta property="og:image" content="https://sunnyyummy.onrender.com/images/share-preview.jpg" /> <!-- 通用預覽圖, JS 會更新 -->
    <meta property="og:url" content="https://sunnyyummy.onrender.com/news.html" /> <!-- 通用 URL, JS 會更新 -->

    <style>
      /* 基本樣式 */
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Noto Sans TC', sans-serif;
          background-color: #fff5f7; /* 保持淡粉色背景 */
          color: #333;
          padding-bottom: 70px; /* 為底部導航留出空間 */
          overflow-x: hidden; /* 防止水平滾動 */
      }

      /* --- 分類標籤樣式 --- */
      .category-tabs {
          display: flex;
          justify-content: center;
          padding: 12px 16px;
          background-color: rgba(255, 255, 255, 0.95);
          position: sticky;
          top: 0;
          z-index: 30;
          backdrop-filter: blur(8px);
          box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }

      .category-tabs a, .category-tabs button {
          padding: 8px 16px;
          margin: 0 6px;
          border-radius: 20px;
          text-decoration: none;
          font-weight: bold;
          font-size: 14px;
          transition: all 0.3s;
          border: none;
          cursor: pointer;
          background-color: #f0f0f0; /* 默認淺灰色背景 */
          color: #666;
      }

      .category-tabs a:hover, .category-tabs button:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 10px rgba(0,0,0,0.1);
          opacity: 0.9;
      }

      /* 分類標籤顏色 */
      .category-tabs a.category-index-all.active {
          background-color: #9575CD; /* 紫色 - 全部消息 */
          color: white;
      }

      .category-tabs a.category-index-0.active {
          background-color: #4DB6AC; /* 青綠色 - 順序 1 */
          color: white;
      }

      .category-tabs a.category-index-1.active {
          background-color: #FFB74D; /* 橙色 - 順序 2 */
          color: white;
      }

      .category-tabs a.category-index-2.active {
          background-color: #7986CB; /* 藍色 - 順序 3 */
          color: white;
      }

      .category-tabs a.category-index-3.active {
          background-color: #F06292; /* 粉紅色 - 順序 4 */
          color: white;
      }

      /* 順序 5 及以後的分類，或未匹配的 active 標籤，使用灰色 */
      .category-tabs a.active:not(.category-index-all):not(.category-index-0):not(.category-index-1):not(.category-index-2):not(.category-index-3) {
          background-color: #B0BEC5; /* 灰色 */
          color: white;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2); /* 保持陰影 */
      }

      /* 確保特定索引的顏色優先級更高 */
      .category-tabs a.category-index-all.active,
      .category-tabs a.category-index-0.active,
      .category-tabs a.category-index-1.active,
      .category-tabs a.category-index-2.active,
      .category-tabs a.category-index-3.active {
          box-shadow: 0 2px 8px rgba(0,0,0,0.2); /* 添加陰影 */
      }

      /* --- 浮動角色 --- */
      .floating-character {
          position: fixed;
          width: 60px;
          height: 60px;
          background-size: contain;
          background-repeat: no-repeat;
          background-position: center;
          z-index: 10;
          pointer-events: auto; /* 允許點擊 */
          transition: transform 0.3s ease, filter 0.3s ease;
      }

      .pink-character {
          top: 100px;
          left: 10%;
          background-image: url('/images/pink-character.png'); /* 粉紅角色圖片 */
          animation: float1 15s ease-in-out infinite;
      }

      .blue-character {
          top: 40%;
          right: 5%;
          background-image: url('/images/blue-character.png'); /* 藍色角色圖片 */
          animation: float2 18s ease-in-out infinite;
      }

      .yellow-character {
          top: 60%;
          left: 15%;
          background-image: url('/images/yellow-character.png'); /* 黃色角色圖片 */
          animation: float3 20s ease-in-out infinite;
      }

      /* 浮動動畫 */
      @keyframes float1 {
          0%, 100% { transform: translate(0, 0) rotate(0); }
          25% { transform: translate(20px, 15px) rotate(5deg); }
          50% { transform: translate(0px, 30px) rotate(-5deg); }
          75% { transform: translate(-20px, 15px) rotate(5deg); }
      }

      @keyframes float2 {
          0%, 100% { transform: translate(0, 0) rotate(0); }
          25% { transform: translate(-15px, 15px) rotate(-5deg); }
          50% { transform: translate(-25px, -5px) rotate(5deg); }
          75% { transform: translate(-10px, -20px) rotate(-5deg); }
      }

      @keyframes float3 {
          0%, 100% { transform: translate(0, 0) rotate(0); }
          25% { transform: translate(15px, -10px) rotate(5deg); }
          50% { transform: translate(25px, 10px) rotate(-8deg); }
          75% { transform: translate(10px, 20px) rotate(3deg); }
      }

      /* 角色點擊效果 */
      .floating-character.touched {
          transform: scale(1.3) rotate(15deg) !important;
          filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 255, 255, 0.8));
          z-index: 20;
      }

      .pink-character.touched {
          filter: brightness(1.2) drop-shadow(0 0 8px rgba(255, 182, 193, 0.8));
      }

      .blue-character.touched {
          filter: brightness(1.2) drop-shadow(0 0 8px rgba(135, 206, 235, 0.8));
      }

      .yellow-character.touched {
          filter: brightness(1.2) drop-shadow(0 0 8px rgba(255, 215, 0, 0.8));
      }

      @keyframes bounce-rotation {
          0% { transform: scale(1.3) rotate(15deg); }
          25% { transform: scale(1.1) rotate(-10deg); }
          50% { transform: scale(1.2) rotate(5deg); }
          75% { transform: scale(1.1) rotate(-5deg); }
          100% { transform: scale(1) rotate(0); }
      }

      .floating-character.bounce-back {
          animation: bounce-rotation 0.8s forwards;
          z-index: 15;
      }

      /* 角色對話泡泡 */
      .character-speech {
          position: absolute;
          top: -40px;
          left: 50%;
          transform: translateX(-50%) translateY(-10px);
          background-color: white;
          border-radius: 15px;
          padding: 6px 10px;
          font-size: 12px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.2);
          opacity: 0;
          transition: opacity 0.3s, transform 0.3s;
          pointer-events: none;
          text-align: center;
          min-width: 80px;
          z-index: 25;
          white-space: nowrap;
      }

      .character-speech:after {
          content: '';
          position: absolute;
          bottom: -8px;
          left: 50%;
          transform: translateX(-50%) rotate(45deg);
          width: 12px;
          height: 12px;
          background-color: white;
      }

      .character-speech.visible {
          opacity: 1;
          transform: translateX(-50%) translateY(-5px);
      }

      /* --- 返回頂部按鈕 --- */
      .back-to-top {
          position: fixed;
          right: 16px;
          bottom: 76px;
          background: white;
          border-radius: 50%;
          width: 44px;
          height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 3px 10px rgba(0,0,0,0.2);
          opacity: 0;
          transform: scale(0.8) translateY(10px);
          transition: all 0.3s;
          z-index: 999;
          border: none;
          padding: 3px;
          cursor: pointer;
      }

      .back-to-top.visible {
          opacity: 1;
          transform: scale(1) translateY(0);
      }

      .back-to-top:hover {
          transform: scale(1.1);
      }

      .back-to-top:active {
          transform: scale(0.95);
      }

      .logo-circle {
          width: 100%;
          height: 100%;
          background: linear-gradient(135deg, #FFD54F, #FFB74D);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: inset 0 -2px 5px rgba(0,0,0,0.1);
      }

      .logo-circle img {
          width: 65%;
          height: 65%;
          object-fit: contain;
      }

      /* --- 底部導航 --- */
      .bottom-nav {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background-color: white;
          box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
          border-top-left-radius: 20px;
          border-top-right-radius: 20px;
          z-index: 1000;
          padding: 5px 0;
      }

      .bottom-nav ul {
          display: flex;
          justify-content: space-around;
          align-items: center;
          list-style: none;
          margin: 0;
          padding: 0;
      }

      .bottom-nav li {
          text-align: center;
      }

      .bottom-nav a {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 5px;
          text-decoration: none;
          color: #777;
          font-size: 0.7rem;
          transition: all 0.3s;
      }

      .bottom-nav a.active {
          color: #FFB74D;
          background-color: rgba(255, 183, 77, 0.1);
          border-radius: 20px;
          animation: pulse 2s infinite;
      }

      .bottom-nav .icon {
          width: 40px;
          height: 40px;
          object-fit: contain;
          margin-bottom: 3px;
      }

      @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
      }

      /* 新聞詳情頁面樣式 */
      .news-detail-container {
          max-width: 800px;
          margin: 20px auto;
          background-color: white;
          border-radius: 16px;
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
          overflow: hidden;
      }

      #news-detail-image {
          width: 100%;
          max-height: 400px;
          object-fit: cover;
      }

      .news-detail-text-content {
          padding: 25px;
      }

      #news-detail-title {
          font-size: 1.8rem;
          font-weight: bold;
          margin-bottom: 10px;
          line-height: 1.3;
      }

      #news-detail-meta {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 20px;
          padding-bottom: 15px;
          border-bottom: 1px solid #eee;
      }

      #news-detail-body {
          line-height: 1.7;
          color: #333;
          font-size: 1.05rem;
      }

      /* 可選: 為複製按鈕添加一點樣式 */
      .copy-link-button {
        background-color: #6c757d; /* 灰色背景 */
        color: white;
        border: none;
        padding: 3px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9em;
        margin-left: 10px; /* 與前一個連結的間距 */
        font-weight: bold;
      }

      .copy-link-button:hover {
        background-color: #5a6268;
      }

      /* 桌面版頁腳 */
      .desktop-footer {
          background-color: #f8f8f8;
          padding: 20px 0;
          margin-top: 30px;
          display: none; /* 手機版預設隱藏 */
      }

      .footer-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 20px;
      }

      .footer-nav {
          display: flex;
          justify-content: center;
          gap: 20px;
          margin-bottom: 15px;
      }

      .footer-nav a {
          color: #555;
          text-decoration: none;
          transition: color 0.3s;
      }

      .footer-nav a:hover {
          color: #FFB74D;
      }

      .footer-copyright {
          text-align: center;
          color: #888;
          font-size: 0.9rem;
      }

      /* 响應式設計 */
      @media (max-width: 767px) {
          body {
              padding-bottom: 70px;
          }

          .desktop-footer {
              display: none;
          }
      }

      @media (min-width: 768px) {
          body {
              padding-bottom: 70px;
          }

          .floating-character {
              width: 80px;
              height: 80px;
          }

          .desktop-footer {
              display: block;
          }
      }

      @media (min-width: 1024px) {
          .news-detail-container {
              margin: 30px auto;
          }

          .news-detail-text-content {
              padding: 30px;
          }
      }
    </style>
</head>
<body>
    <!-- 分類導航 -->
    <div id="category-tabs" class="category-tabs">
        <!-- Category links/buttons will be dynamically inserted here by news.js -->
        <a href="#" class="active">載入中...</a> <!-- Placeholder -->
    </div>

    <!-- 浮動角色 -->
    <div class="floating-character pink-character"></div>
    <div class="floating-character blue-character"></div>
    <div class="floating-character yellow-character"></div>

    <main>
        <!-- 新聞內容區域 -->
        <article id="news-content-area">
            <!-- 內容容器 -->
            <div class="news-detail-container">
                <!-- 初始載入訊息 -->
                <p style="text-align: center; padding: 2rem 0;">正在載入新聞內容...</p>

                <!-- 新聞大圖 -->
                <img src="" alt="" id="news-detail-image" style="display: none;"> <!-- JS 控制顯示 -->

                <!-- 文字內容容器 -->
                <div class="news-detail-text-content">
                    <!-- 新聞標題 -->
                    <h1 id="news-detail-title"></h1>
                    <!-- Meta 資訊 -->
                    <p id="news-detail-meta"></p>
                    <br>
                    
                    <!-- 新聞內文 -->
                    <div id="news-detail-body"></div>
                </div>
            </div>
        </article>
    </main>

    <!-- 返回頂部按鈕 -->
    <button id="back-to-top" class="back-to-top">
        <div class="logo-circle">
            <img src="https://sunnyyummy.onrender.com/uploads/1744875326039-16458.png" alt="SunnyYummy" />
        </div>
    </button>
    
    <!-- 底部導航 -->
    <nav class="bottom-nav">
        <ul>
            <li><a href="/"><img src="/images/footicon_store.png" alt="商品" class="icon"><span>商品</span></a></li>
            <li><a href="/music.html"><img src="/images/footicon_music.png" alt="音樂" class="icon"><span>音樂</span></a></li>
            <li><a href="/news.html" class="active"><img src="/images/footicon_nuews.png" alt="消息" class="icon"><span>消息</span></a></li>
            <li><a href="/scores.html"><img src="/images/footicon_score.png" alt="樂譜" class="icon"><span>樂譜</span></a></li>
            <li><a href="/games.html"><img src="/images/footicon_game.png" alt="遊戲" class="icon"><span>遊戲</span></a></li>
            <li><a href="/guestbook.html"><img src="/images/footicon_guestbook.png" alt="留言" class="icon"><span>留言</span></a></li>
        </ul>
    </nav>
    
    <!-- 頁腳 - 在大屏幕設備上顯示 -->
    <footer class="desktop-footer">
        <div class="footer-container">
            <div class="footer-nav">
                <a href="/">週邊商品</a>
                <a href="/music.html">音樂專輯</a>
                <a href="/news.html" class="active">最新消息</a>
            </div>
            <div class="footer-copyright">
                <p>© 2023 SunnyYummy. All rights reserved.</p>
                <p>信箱：paulaqueenatina@gmail.com</p>
                <p>客服時間：週一～週五 08:00～17:00</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="/news-detail.js"></script>
    <script src="/news-detail-enhancements.js"></script>
</body>
</html>