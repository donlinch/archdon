<!DOCTYPE html>
<html lang="zh-TW" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>烹飪模擬器</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #2c3e50;
            --surface-color: #34495e;
            --text-color: #fff;   /* #edf3f5; */
            --text-muted-color: #bdc3c7;
            --border-color: #4a6278;
            --danger-color: #e74c3c;
            --warning-color: #f1c40f;
            --success-color: #27ae60;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', 'Helvetica Neue', sans-serif;
            margin: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .sidebar {
            width: 260px;
            background-color: var(--surface-color);
            padding: 200px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
            flex-shrink: 0;
        }
        
        .sidebar nav a {
            
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: var(--text-muted-color);
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 8px;
            transition: background-color 0.3s, color 0.3s;
        }
        .sidebar nav a i { margin-right: 15px; width: 20px; text-align: center; }
        .sidebar nav a.active, .sidebar nav a:hover { background-color: var(--primary-color); color: #fff; }
        
        .admin-sidebar { display: flex; flex-direction: column; height: 100%; }
        .admin-sidebar h2 { text-align: center; margin-bottom: 30px; font-size: 24px; font-weight: bold; color: var(--primary-color); }
        .admin-sidebar .user-profile { padding-bottom: 20px; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 15px; }
        .admin-sidebar .user-profile img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary-color); }
        .admin-sidebar .user-profile .user-info { line-height: 1.2; color: #ecf0f1; }
        .admin-sidebar .user-info strong { font-size: 16px; display: block; margin-bottom: 4px; }
        .admin-sidebar .user-info span { font-size: 14px; opacity: 0.8; }

        .main-content {  flex-grow: 1; display: flex; flex-direction: column; height: 100vh; overflow: hidden;}
        header { padding: 15px 30px; background-color: var(--surface-color); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;}
        header h1 { margin: 0; font-size: 24px; color: #ecf0f1;}
        .page-content { flex-grow: 1; overflow-y: auto; padding: 20px; }

        .tier-0 { background-color: #e9ecef; color: #212529; } /* 基礎食材 */
        .tier-1 { background-color: #fff3cd; color: #212529; } /* 半成品 */
        .tier-2 { background-color: #d4edda; color: #212529; } /* 最終料理 */

        /* 模擬器相關樣式 */
        .sim-item {
            width: 70px;
            height: 70px;
            border: 1px solid #ddd;
            border-radius: 3px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: white;
            cursor: grab;
            position: relative;
            user-select: none;
            overflow: hidden;
        }

        .sim-item:active {
            cursor: grabbing;
        }

        .sim-item .ascii-symbol {
            font-size: 40px;
            line-height: 1;
            opacity: 0.8;
            z-index: 1;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .sim-item .item-name {
            font-size: 12px;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            width: 100%;
            padding: 2px 3px;
            position: absolute;
            bottom: 0;
            left: 0;
            background-color: rgba(255, 255, 255, 0.7);
            z-index: 2;
            color: #000;
            font-weight: bold;
        }

        .crafting-slot .sim-item .item-name {
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.9);
        }

        .sim-item .tier-badge {
            position: absolute;
            top: 1px;
            right: 1px;
            font-size: 8px;
            padding: 1px 3px;
            border-radius: 2px;
            z-index: 3;
        }

        .crafting-slot {
            position: relative;
            transition: background-color 0.2s;
        }

        .crafting-slot.drag-over {
            background-color: rgba(52, 152, 219, 0.2) !important;
        }

        .crafting-slot .sim-item {
            width: 100%;
            height: 100%;
        }

        .cooking-method-btn.active {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }

        .cooking-method-btn.recommended {
            background-color: #2ecc71;
            color: white;
            border-color: #2ecc71;
        }

        #simulationResults {
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.5;
        }

        .simulation-success {
            color: #2ecc71;
        }

        .simulation-error {
            color: #e74c3c;
        }

        .simulation-info {
            color: #3498db;
        }

        /* 水煮模擬動畫 */
        .boil-animation-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 10px 0;
        }
        
        /* 全螢幕水煮動畫覆蓋層 */
        .fullscreen-boil-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .fullscreen-boil-spinner {
            width: 150px;
            height: 150px;
            border: 10px solid #e2e8f0;
            border-top-color: #3182ce;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .fullscreen-boil-wave {
            color: #3182ce;
            font-size: 4rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .fullscreen-boil-text {
            margin-top: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
        }
        
        /* 成功訊息覆蓋層 */
        .success-message-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeIn 0.5s ease-in-out, fadeOut 0.5s ease-in-out 2.5s forwards;
        }
        
        .success-message-content {
            background-color: rgba(47, 133, 90, 0.9);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transform: scale(0.8);
            animation: popIn 0.5s ease-out forwards;
        }
        
        .success-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: white;
        }
        
        .success-text {
            color: white;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .item-name-text {
            color: #ffeb3b;
            font-size: 32px;
            font-weight: bold;
            margin: 15px 0;
        }
        
        .item-ascii {
            font-size: 72px;
            line-height: 1;
            margin: 10px 0;
            color: white;
        }
        
        .tier-badge-large {
            display: inline-block;
            background-color: #ffeb3b;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 20px;
            margin-left: 10px;
        }
        
        .boil-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid #e2e8f0;
            border-top-color: #3182ce;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .boil-wave {
            color: #3182ce;
            font-size: 2rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(0.8);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .view-path-btn {
            position: absolute;
            bottom: 1px;
            right: 1px;
            padding: 1px 4px;
            font-size: 9px;
            line-height: 1.2;
        }

        #synthesisPathContent ul {
            padding-left: 20px;
            list-style-type: none;
        }
        #synthesisPathContent li {
            position: relative;
        }
        #synthesisPathContent li::before {
            content: '';
            position: absolute;
            left: -20px;
            top: -1.2em;
            border-left: 1px dashed #999;
            border-bottom: 1px dashed #999;
            width: 15px;
            height: 100%;
        }
        #synthesisPathContent li:last-child::before {
             border-left: 1px dashed #999;
        }

        .card-header {
            color: #212529;
        }

        .mb-3 {
            color: #212529;
        }
        
        #simulatorSection h5 {
            color: #212529;
        }

        /* 新增烹飪按鈕樣式 */
        .btn-cooking {
            background-color: #ff7043;
            color: white;
            border: 1px solid #e64a19;
            transition: all 0.3s ease;
        }
        
        .btn-cooking:hover {
            background-color: #ff5722;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .btn-cooking.active {
            background-color: #e64a19;
            color: white;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
            transform: translateY(0);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes popIn {
            from { transform: scale(0.8); }
            to { transform: scale(1); }
        }

        /* 全螢幕油炸動畫覆蓋層 */
        .fullscreen-fry-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .fullscreen-fry-spinner {
            width: 150px;
            height: 150px;
            border: 10px solid #ffeaa7;
            border-top-color: #e67e22;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .fullscreen-fry-bubbles {
            position: relative;
            width: 80px;
            height: 80px;
            color: #e67e22;
            animation: pulse 1s ease-in-out infinite alternate;
        }
        
        .fry-bubble {
            position: absolute;
            background-color: #e67e22;
            border-radius: 50%;
            opacity: 0.8;
        }
        
        .fry-bubble:nth-child(1) {
            width: 15px;
            height: 15px;
            top: 10px;
            left: 10px;
            animation: bubbleFloat 1.2s infinite ease-in-out;
        }
        
        .fry-bubble:nth-child(2) {
            width: 12px;
            height: 12px;
            top: 30px;
            left: 50px;
            animation: bubbleFloat 1.5s infinite ease-in-out 0.2s;
        }
        
        .fry-bubble:nth-child(3) {
            width: 18px;
            height: 18px;
            top: 50px;
            left: 15px;
            animation: bubbleFloat 1.1s infinite ease-in-out 0.5s;
        }
        
        .fry-bubble:nth-child(4) {
            width: 10px;
            height: 10px;
            top: 20px;
            left: 60px;
            animation: bubbleFloat 1.3s infinite ease-in-out 0.3s;
        }
        
        .fry-bubble:nth-child(5) {
            width: 14px;
            height: 14px;
            top: 60px;
            left: 40px;
            animation: bubbleFloat 1.4s infinite ease-in-out 0.1s;
        }
        
        @keyframes bubbleFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.8;
            }
            50% {
                transform: translateY(-15px) scale(1.2);
                opacity: 0.9;
            }
            100% {
                transform: translateY(-30px) scale(0.8);
                opacity: 0;
            }
        }
        
        .fullscreen-fry-text {
            margin-top: 20px;
            color: #e67e22;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* 全螢幕烤製動畫覆蓋層 */
        .fullscreen-grill-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .fullscreen-grill-text {
            margin-top: 20px;
            color: #e74c3c;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* 烤製火焰動畫 */
        @keyframes scaleUpDown {
            0%, 100% {
                transform: scaleY(1) scaleX(1);
            }
            50%, 90% {
                transform: scaleY(1.1);
            }
            75% {
                transform: scaleY(0.95);
            }
            80% {
                transform: scaleX(0.95);
            }
        }

        @keyframes shake {
            0%, 100% {
                transform: skewX(0) scale(1);
            }
            50% {
                transform: skewX(5deg) scale(0.9);
            }
        }

        @keyframes particleUp {
            0% {
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                top: -100%;
                transform: scale(0.5);
            }
        }

        @keyframes glow {
            0%, 100% {
                background-color: #ef5a00;
            }
            50% {
                background-color: #ff7800;
            }
        }

        .fire {
            position: relative;
            width: 150px;
            height: 150px;
            background-color: transparent;
            margin: 0 auto;
        }

        .fire-center {
            position: absolute;
            height: 100%;
            width: 100%;
            animation: scaleUpDown 3s ease-out;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }

        .fire-center .main-fire {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(farthest-corner at 10px 0, #d43300 0%, #ef5a00 95%);
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 0 40% 60% 40%;
            filter: drop-shadow(0 0 10px #d43322);
        }

        .fire-center .particle-fire {
            position: absolute;
            top: 60%;
            left: 45%;
            width: 10px;
            height: 10px;
            background-color: #ef5a00;
            border-radius: 50%;
            filter: drop-shadow(0 0 10px #d43322);
            animation: particleUp 2s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }

        .fire-right {
            height: 100%;
            width: 100%;
            position: absolute;
            animation: shake 2s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }

        .fire-right .main-fire {
            position: absolute;
            top: 15%;
            right: -25%;
            width: 80%;
            height: 80%;
            background-color: #ef5a00;
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 0 40% 60% 40%;
            filter: drop-shadow(0 0 10px #d43322);
        }

        .fire-right .particle-fire {
            position: absolute;
            top: 45%;
            left: 50%;
            width: 15px;
            height: 15px;
            background-color: #ef5a00;
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 50%;
            filter: drop-shadow(0 0 10px #d43322);
            animation: particleUp 2s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }

        .fire-left {
            position: absolute;
            height: 100%;
            width: 100%;
            animation: shake 3s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }

        .fire-left .main-fire {
            position: absolute;
            top: 15%;
            left: -20%;
            width: 80%;
            height: 80%;
            background-color: #ef5a00;
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 0 40% 60% 40%;
            filter: drop-shadow(0 0 10px #d43322);
        }

        .fire-left .particle-fire {
            position: absolute;
            top: 10%;
            left: 20%;
            width: 10%;
            height: 10%;
            background-color: #ef5a00;
            border-radius: 50%;
            filter: drop-shadow(0 0 10px #d43322);
            animation: particleUp 3s infinite ease-out 0;
            animation-fill-mode: both;
        }

        .fire-bottom .main-fire {
            position: absolute;
            top: 30%;
            left: 20%;
            width: 75%;
            height: 75%;
            background-color: #ff7800;
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 0 40% 100% 40%;
            filter: blur(10px);
            animation: glow 2s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }
        
        /* 移除舊的烤製動畫 */
        .pl {
            width: 6em;
            height: 6em;
        }

        .pl circle {
            transform-box: fill-box;
            transform-origin: 50% 50%;
        }

        .pl__ring1 {
            animation: ring1 4s 0s ease-in-out infinite;
            stroke: #e74c3c;
            stroke-dasharray: 180;
            stroke-dashoffset: -376.237129776;
            stroke-width: 8px;
            fill: none;
        }

        .pl__ring2 {
            animation: ring2 4s 0.04s ease-in-out infinite;
            stroke: #f39c12;
            stroke-dasharray: 180;
            stroke-dashoffset: -329.207488554;
            stroke-width: 7px;
            fill: none;
        }

        .pl__ring3 {
            animation: ring3 4s 0.08s ease-in-out infinite;
            stroke: #f1c40f;
            stroke-dasharray: 180;
            stroke-dashoffset: -288.4484661616;
            stroke-width: 6px;
            fill: none;
        }

        .pl__ring4 {
            animation: ring4 4s 0.12s ease-in-out infinite;
            stroke: #e67e22;
            stroke-dasharray: 180;
            stroke-dashoffset: -253.9600625988;
            stroke-width: 5px;
            fill: none;
        }

        .pl__ring5 {
            animation: ring5 4s 0.16s ease-in-out infinite;
            stroke: #d35400;
            stroke-dasharray: 180;
            stroke-dashoffset: -225.7422778656;
            stroke-width: 4px;
            fill: none;
        }

        .pl__ring6 {
            animation: ring6 4s 0.2s ease-in-out infinite;
            stroke: #c0392b;
            stroke-dasharray: 180;
            stroke-dashoffset: -203.795111962;
            stroke-width: 3px;
            fill: none;
        }

        /* 烤製動畫關鍵幀 */
        @keyframes ring1 {
            from {
                stroke-dashoffset: -376.237129776;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -94.247778;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -376.237129776;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -94.247778;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -376.237129776;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring2 {
            from {
                stroke-dashoffset: -329.207488554;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -82.46680575;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -329.207488554;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -82.46680575;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -329.207488554;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring3 {
            from {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -72.2566298;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -72.2566298;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring4 {
            from {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -63.61725015;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -63.61725015;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring5 {
            from {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -56.5486668;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -56.5486668;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring6 {
            from {
                stroke-dashoffset: -203.795111962;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -51.05087975;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -203.795111962;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -51.05087975;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -203.795111962;
                transform: rotate(4.75turn);
            }
        }

        .fire-bottom .main-fire {
            position: absolute;
            top: 30%;
            left: 20%;
            width: 75%;
            height: 75%;
            background-color: #ff7800;
            transform: scaleX(0.8) rotate(45deg);
            border-radius: 0 40% 100% 40%;
            filter: blur(10px);
            animation: glow 2s ease-out 0;
            animation-iteration-count: infinite;
            animation-fill-mode: both;
        }
        
        /* 煎炒動畫 */
        .fullscreen-pan-fry-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .fullscreen-pan-fry-text {
            margin-top: 20px;
            color: #f39c12;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .loader {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .panWrapper {
            width: 200px;
            height: fit-content;
            position: relative;
            display: flex;
            align-items: flex-start;
            justify-content: flex-end;
            flex-direction: column;
            gap: 20px;
        }

        .pan {
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            width: 100%;
            height: fit-content;
            animation: cooking 1.7s infinite;
            position: relative;
        }
        
        @keyframes cooking {
            0% {
                transform: rotate(0deg);
                transform-origin: top right;
            }
            10% {
                transform: rotate(-4deg);
                transform-origin: top right;
            }
            50% {
                transform: rotate(20deg);
            }
            100% {
                transform: rotate(0deg);
            }
        }

        .food {
            position: absolute;
            width: 40%;
            height: 6px;
            background: linear-gradient(to bottom, rgb(82, 33, 33), rgb(200, 106, 106));
            left: 10px;
            border-radius: 50%;
            animation: flip 1.7s infinite;
            z-index: 2;
        }
        
        @keyframes flip {
            0% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-100px) rotate(180deg);
            }
            100% {
                transform: translateY(0px) rotate(360deg);
            }
        }
        
        .panBase {
            z-index: 3;
            width: 50%;
            height: 22px;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            background: linear-gradient(to top, rgb(3, 156, 156), rgb(10, 191, 191));
        }
        
        .panHandle {
            width: 40%;
            background: linear-gradient(to bottom, rgb(18, 18, 18), rgb(74, 74, 74));
            height: 10px;
            border-radius: 10px;
        }
        
        .panShadow {
            width: 70px;
            height: 8px;
            background-color: rgba(0, 0, 0, 0.21);
            margin-left: 15px;
            border-radius: 10px;
            animation: shadow 1.7s infinite;
            filter: blur(5px);
        }
        
        @keyframes shadow {
            0% {
                transform: scaleX(0.7);
            }
            50% {
                transform: scaleX(1);
            }
            100% {
                transform: scaleX(0.7);
            }
        }
        
        /* 添加火焰效果 */
        .pan-flames {
            position: absolute;
            bottom: -15px;
            left: 10px;
            width: 50%;
            height: 15px;
            display: flex;
            justify-content: space-around;
            z-index: 1;
        }
        
        .flame {
            width: 10px;
            height: 15px;
            background: linear-gradient(to top, #f39c12, #e74c3c);
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.5s infinite alternate;
        }
        
        @keyframes flicker {
            0% {
                height: 15px;
                opacity: 1;
            }
            100% {
                height: 10px;
                opacity: 0.8;
            }
        }
        
        .flame:nth-child(2) {
            animation-delay: 0.1s;
            height: 12px;
        }
        
        .flame:nth-child(3) {
            animation-delay: 0.2s;
            height: 17px;
        }
        
        .flame:nth-child(4) {
            animation-delay: 0.15s;
            height: 14px;
        }
        
        .flame:nth-child(5) {
            animation-delay: 0.05s;
            height: 13px;
        }
        
        /* 移除舊的烤製動畫 */
        .pl {
            width: 6em;
            height: 6em;
        }

        .pl circle {
            transform-box: fill-box;
            transform-origin: 50% 50%;
        }

        .pl__ring1 {
            animation: ring1 4s 0s ease-in-out infinite;
            stroke: #e74c3c;
            stroke-dasharray: 180;
            stroke-dashoffset: -376.237129776;
            stroke-width: 8px;
            fill: none;
        }

        .pl__ring2 {
            animation: ring2 4s 0.04s ease-in-out infinite;
            stroke: #f39c12;
            stroke-dasharray: 180;
            stroke-dashoffset: -329.207488554;
            stroke-width: 7px;
            fill: none;
        }

        .pl__ring3 {
            animation: ring3 4s 0.08s ease-in-out infinite;
            stroke: #f1c40f;
            stroke-dasharray: 180;
            stroke-dashoffset: -288.4484661616;
            stroke-width: 6px;
            fill: none;
        }

        .pl__ring4 {
            animation: ring4 4s 0.12s ease-in-out infinite;
            stroke: #e67e22;
            stroke-dasharray: 180;
            stroke-dashoffset: -253.9600625988;
            stroke-width: 5px;
            fill: none;
        }

        .pl__ring5 {
            animation: ring5 4s 0.16s ease-in-out infinite;
            stroke: #d35400;
            stroke-dasharray: 180;
            stroke-dashoffset: -225.7422778656;
            stroke-width: 4px;
            fill: none;
        }

        .pl__ring6 {
            animation: ring6 4s 0.2s ease-in-out infinite;
            stroke: #c0392b;
            stroke-dasharray: 180;
            stroke-dashoffset: -203.795111962;
            stroke-width: 3px;
            fill: none;
        }

        /* 烤製動畫關鍵幀 */
        @keyframes ring1 {
            from {
                stroke-dashoffset: -376.237129776;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -94.247778;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -376.237129776;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -94.247778;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -376.237129776;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring2 {
            from {
                stroke-dashoffset: -329.207488554;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -82.46680575;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -329.207488554;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -82.46680575;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -329.207488554;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring3 {
            from {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -72.2566298;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -72.2566298;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -288.4484661616;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring4 {
            from {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -63.61725015;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -63.61725015;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -253.9600625988;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring5 {
            from {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -56.5486668;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -56.5486668;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -225.7422778656;
                transform: rotate(4.75turn);
            }
        }

        @keyframes ring6 {
            from {
                stroke-dashoffset: -203.795111962;
                transform: rotate(-0.25turn);
                animation-timing-function: ease-in;
            }

            23% {
                stroke-dashoffset: -51.05087975;
                transform: rotate(1turn);
                animation-timing-function: ease-out;
            }

            46%, 50% {
                stroke-dashoffset: -203.795111962;
                transform: rotate(2.25turn);
                animation-timing-function: ease-in;
            }

            73% {
                stroke-dashoffset: -51.05087975;
                transform: rotate(3.5turn);
                animation-timing-function: ease-out;
            }

            96%, to {
                stroke-dashoffset: -203.795111962;
                transform: rotate(4.75turn);
            }
        }

        /* 組合動畫 */
        .fullscreen-assembly-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .fullscreen-assembly-text {
            margin-top: 20px;
            color: #a78bfa;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .assembly-loader {
            --duration: 3s;
            --primary: #805ad5; /* 主色調 - 紫色 */
            --primary-light: #a78bfa; /* 亮紫色 */
            --primary-rgba: rgba(128, 90, 213, 0);
            width: 200px;
            height: 320px;
            position: relative;
            transform-style: preserve-3d;
        }

        @media (max-width: 480px) {
            .assembly-loader {
                zoom: 0.44;
            }
        }
        
        .assembly-loader .ground {
            position: absolute;
            left: -50px;
            bottom: -120px;
            transform-style: preserve-3d;
            transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);
        }

        .assembly-loader .ground div {
            transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(0);
            width: 200px;
            height: 200px;
            /* 盤子樣式 */
            background: #e0e0e0;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform-style: preserve-3d;
            animation: ground var(--duration) linear forwards infinite;
        }

        .assembly-loader .box {
            --x: 0;
            --y: 0;
            position: absolute;
            animation: var(--duration) linear forwards infinite;
            transform: translate(var(--x), var(--y));
        }

        .assembly-loader .box div {
            background-color: var(--primary);
            width: 48px;
            height: 48px;
            position: relative;
            transform-style: preserve-3d;
            animation: var(--duration) ease forwards infinite;
            transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);
        }

        .assembly-loader .box div:before,
        .assembly-loader .box div:after {
            --rx: 90deg;
            --ry: 0deg;
            --z: 24px;
            --y: -24px;
            --x: 0;
            content: "";
            position: absolute;
            background-color: inherit;
            width: inherit;
            height: inherit;
            transform: rotateX(var(--rx)) rotateY(var(--ry)) translate(var(--x), var(--y)) translateZ(var(--z));
            filter: brightness(var(--b, 1.2));
        }

        .assembly-loader .box div:after {
            --rx: 0deg;
            --ry: 90deg;
            --x: 24px;
            --y: 0;
            --b: 1.4;
        }
        
        .assembly-loader .box.box0 { --x: -220px; --y: -120px; left: 58px; top: 108px; }
        .assembly-loader .box.box1 { --x: -260px; --y: 120px; left: 25px; top: 120px; }
        .assembly-loader .box.box2 { --x: 120px; --y: -190px; left: 58px; top: 64px; }
        .assembly-loader .box.box3 { --x: 280px; --y: -40px; left: 91px; top: 120px; }
        .assembly-loader .box.box4 { --x: 60px; --y: 200px; left: 58px; top: 132px; }
        .assembly-loader .box.box5 { --x: -220px; --y: -120px; left: 25px; top: 76px; }
        .assembly-loader .box.box6 { --x: -260px; --y: 120px; left: 91px; top: 76px; }
        .assembly-loader .box.box7 { --x: -240px; --y: 200px; left: 58px; top: 87px; }

        .assembly-loader .box0 { animation-name: box-move0; }
        .assembly-loader .box0 div { animation-name: box-scale0; }
        .assembly-loader .box1 { animation-name: box-move1; }
        .assembly-loader .box1 div { animation-name: box-scale1; }
        .assembly-loader .box2 { animation-name: box-move2; }
        .assembly-loader .box2 div { animation-name: box-scale2; }
        .assembly-loader .box3 { animation-name: box-move3; }
        .assembly-loader .box3 div { animation-name: box-scale3; }
        .assembly-loader .box4 { animation-name: box-move4; }
        .assembly-loader .box4 div { animation-name: box-scale4; }
        .assembly-loader .box5 { animation-name: box-move5; }
        .assembly-loader .box5 div { animation-name: box-scale5; }
        .assembly-loader .box6 { animation-name: box-move6; }
        .assembly-loader .box6 div { animation-name: box-scale6; }
        .assembly-loader .box7 { animation-name: box-move7; }
        .assembly-loader .box7 div { animation-name: box-scale7; }

        @keyframes box-move0 { 12% { transform: translate(var(--x), var(--y)); } 25%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale0 { 6% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 14%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move1 { 16% { transform: translate(var(--x), var(--y)); } 29%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale1 { 10% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 18%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move2 { 20% { transform: translate(var(--x), var(--y)); } 33%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale2 { 14% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 22%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move3 { 24% { transform: translate(var(--x), var(--y)); } 37%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale3 { 18% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 26%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move4 { 28% { transform: translate(var(--x), var(--y)); } 41%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale4 { 22% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 30%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move5 { 32% { transform: translate(var(--x), var(--y)); } 45%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale5 { 26% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 34%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move6 { 36% { transform: translate(var(--x), var(--y)); } 49%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale6 { 30% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 38%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
        @keyframes box-move7 { 40% { transform: translate(var(--x), var(--y)); } 53%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 0); } }
        @keyframes box-scale7 { 34% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 42%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }

        @keyframes ground {
            0% { transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(0); }
            15%, 100% { transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(1); }
        }

        /* 添加組合提示框樣式 */
        .recipe-tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            min-width: 200px;
            max-width: 300px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 14px;
            text-align: left;
        }

        .recipe-tooltip-title {
            font-weight: bold;
            margin-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 5px;
        }

        .recipe-tooltip-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }

        .recipe-tooltip-symbol {
            font-size: 18px;
            margin-right: 8px;
        }

        .recipe-tooltip-method {
            margin-top: 8px;
            font-style: italic;
            color: #f39c12;
        }

        .recipe-path-arrow {
            margin: 0 5px;
            color: #3498db;
        }
        
        /* 訂單系統樣式 */
        .order-highlight {
            box-shadow: 0 0 15px #f39c12;
            transform: scale(1.05);
            border: 2px solid #f39c12;
            animation: pulse-order 2s infinite;
        }
        
        /* 訂單緊急狀態樣式 */
        .order-urgent {
            box-shadow: 0 0 15px #e74c3c !important;
            border: 2px solid #e74c3c !important;
            animation: pulse-urgent 1s infinite !important;
        }
        
        @keyframes pulse-urgent {
            0% { box-shadow: 0 0 15px rgba(231, 76, 60, 0.7); }
            50% { box-shadow: 0 0 20px rgba(231, 76, 60, 1); }
            100% { box-shadow: 0 0 15px rgba(231, 76, 60, 0.7); }
        }
        
        @keyframes pulse-order {
            0% { box-shadow: 0 0 15px rgba(243, 156, 18, 0.7); }
            50% { box-shadow: 0 0 20px rgba(243, 156, 18, 1); }
            100% { box-shadow: 0 0 15px rgba(243, 156, 18, 0.7); }
        }
        
        .order-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #f39c12;
            text-align: center;
        }
        
        .order-timer-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #3498db;
            text-align: center;
            margin-top: 10px;
        }
        
        .timer-warning {
            color: #e74c3c;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* 新的配方提示框樣式 */
        .recipe-container {
            font-size: 18px;
            color: #333;
            position: relative;
            cursor: pointer;
            display: inline-block;
        }

        .recipe-hover {
            position: relative;
            z-index: 1;
            text-decoration: underline;
            text-underline-offset: 4px;
            text-decoration-color: #333;
        }

        .recipe-tooltip-new {
            width: 250px;
            height: 10px;
            background: #ffffff;
            padding: 0.25em;
            text-align: center;
            position: absolute;
            top: 40px;
            left: 0;
            opacity: 0;
            visibility: hidden;
            transform-origin: center top;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            transition: opacity 0.3s ease-in-out;
            z-index: 1000;
            border-radius: 8px;
        }

        .recipe-tooltip-new::before {
            content: "";
            position: absolute;
            top: -8px;
            left: 20%;
            transform: translateX(-50%);
            border-width: 0 7px 8px;
            border-style: solid;
            border-color: transparent transparent #ffffff transparent;
        }

        .recipe-tooltip-content {
            margin: 0;
            color: #333;
            font-weight: 600;
            padding: 10px;
            text-align: left;
            font-size: 14px;
        }

        .recipe-container:hover .recipe-tooltip-new {
            top: 100%;
            opacity: 1;
            visibility: visible;
            animation: recipePopup 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        }

        @keyframes recipePopup {
            0% {
                transform: translateY(0) scaleY(0);
                opacity: 0;
            }
            50% {
                transform: translateY(10%) scaleY(1.1);
                opacity: 1;
            }
            100% {
                transform: translateY(5%);
                opacity: 1;
                height: auto;
                min-height: 100px;
            }
        }
        
        .recipe-ingredient {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        
        .recipe-ingredient-icon {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .recipe-method-tag {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        /* 訂單緊急狀態樣式 */
        .btn-serve-order {
            --primary: 255, 90, 120;
            --secondary: 150, 50, 60;
            width: 40px;
            height: 30px;
            border: none;
            outline: none;
            cursor: pointer;
            user-select: none;
            touch-action: manipulation;
            outline: 0px solid rgb(var(--primary), .5);
            border-radius: 100%;
            position: relative;
            transition: .3s;
        }

        .btn-serve-order .back {
            background: rgb(var(--secondary));
            border-radius: 100%;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }

        .btn-serve-order .front {
            background: linear-gradient(0deg, rgba(var(--primary), .6) 20%, rgba(var(--primary)) 50%);
            box-shadow: 0 .5em 1em -0.2em rgba(var(--secondary), .5);
            border-radius: 100%;
            position: absolute;
            border: 1px solid rgb(var(--secondary));
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 600;
            font-family: inherit;
            transform: translateY(-15%);
            transition: .15s;
            color: rgb(var(--secondary));
        }

        .btn-serve-order:active .front {
            transform: translateY(0%);
            box-shadow: 0 0;
        }

        .order-timer-bar-container {
            width: 100%;
            height: 12px;
            background-color: var(--border-color); /* A dark background */
            border-radius: 6px;
            margin-top: 10px; /* Space from the top content */
            overflow: hidden; /* Ensure inner bar respects border-radius */
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #orderTimerBar {
            height: 100%;
            width: 100%; /* Start at full */
            background: linear-gradient(90deg, #27ae60, #f1c40f);
            border-radius: 6px;
            transition: width 1s linear, background-color 0.5s linear;
        }

        #orderTimerBar.warning {
            background: linear-gradient(90deg, #f1c40f, #e74c3c);
        }
        
        #orderTimerBar.urgent {
            background-color: #e74c3c;
        }

        /* 訂單2計時器樣式 */
        #orderTimerBar2 {
            height: 100%;
            width: 100%; /* Start at full */
            background: linear-gradient(90deg, #27ae60, #f1c40f);
            border-radius: 6px;
            transition: width 1s linear, background-color 0.5s linear;
        }

        #orderTimerBar2.warning {
            background: linear-gradient(90deg, #f1c40f, #e74c3c);
        }
        
        #orderTimerBar2.urgent {
            background-color: #e74c3c;
        }

        .card-body {
    padding: 5px;
    background-color: #f8f9fa;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid #e9ecef;
    max-width: 1200px;
    margin: 0 auto;
}

.card-body:hover {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
}

.card-body > div {
    margin-bottom: 20px;
}

.card-body > div:last-child {
    margin-bottom: 0;
}

        /* 訂單專用圖示樣式 */
        .order-item-display {
            width: 90px;
            height: 90px;
        }

        .order-item-display .ascii-symbol {
            font-size: 55px; /* 可獨立調整訂單圖示中的符號大小 */
        }

        /* --- 3D 風格按鈕 --- */
        /* 通用 3D 按鈕結構 (Refactored from btn-grill-custom) */
        .btn-3d {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            height: 44px;
        }

        .btn-3d .base {
            width: 60px;
            height: 44px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 3px 5px 3px rgba(0,0,0,0.09);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-3d .top {
            width: 56px;
            height: 38px;
            border-radius: 14px;
            position: relative;
            box-shadow: inset 0px -3px rgba(0,0,0,.2);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.2s ease;
            transform: translateY(-2px);
            color: white;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .btn-3d .top::after {
            content: '';
            position: absolute;
            width: 80%;
            height: 4px;
            background-color: white;
            border-radius: 9999px;
            left: 50%;
            top: 2px;
            transform: translateX(-50%);
            opacity: 0.15;
        }

        .btn-3d:active .top {
            transform: translateY(0);
            box-shadow: inset 0px 1px rgba(0,0,0,.2);
        }
        
        /* 防止點擊後出現通用藍色背景 */
        .btn-3d.active {
            background-color: transparent !important;
        }

        /* 顏色修改器 */
        .btn-3d .top.grill { background-color: #ed8936; }
        .btn-3d:active .top.grill { background-color: #dd6b20; }

        .btn-3d .top.pan-fry { background-color: #d69e2e; }
        .btn-3d:active .top.pan-fry { background-color: #b7791f; }

        .btn-3d .top.deep-fry { background-color: #e53e3e; }
        .btn-3d:active .top.deep-fry { background-color: #c53030; }

        .btn-3d .top.boil { background-color: #3182ce; }
        .btn-3d:active .top.boil { background-color: #2c5282; }


        /* Animated Grill Button from Uiverse.io by Li-Deheng */
        .btn-grill-animated {
          --color-text: #ffffff;
          --color-background: #e74c3c; /* Grill-themed color */
          --color-shadow: #00000080;
          
          background: transparent;
          border: none;
          cursor: pointer;
          padding: 0;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .btn-grill-animated .btn-content {
          display: flex;
          align-items: center;
          padding: 4px 12px;
          text-decoration: none;
          font-family: 'Poppins', sans-serif;
          font-weight: 600;
          font-size: 1rem;
          color: var(--color-text);
          background: var(--color-background);
          transition: 1s;
          border-radius: 999px;
          box-shadow: 0 0 0.2em 0 var(--color-background);
        }

        .btn-grill-animated.active .btn-content,
        .btn-grill-animated:hover .btn-content, 
        .btn-grill-animated:focus .btn-content {
          transition: 0.5s;
          animation: btn-content 1s;
          outline: 0.1em solid transparent;
          outline-offset: 0.2em;
          box-shadow: 0 0 0.4em 0 var(--color-background);
        }

        .btn-grill-animated .icon-arrow {
          transition: 0.5s;
          margin-right: -10px;
          margin-left: 5px;
          transform: scale(0.6);
          opacity: 0;
        }

        .btn-grill-animated:hover .icon-arrow {
          transition: 0.5s;
          margin-right: 10px;
          opacity: 1;
        }

        .icon-arrow {
          width: 15px;
          position: relative;
        }
          
        #arrow-icon-one {
          transition: 0.4s;
          transform: translateX(-60%);
        }

        #arrow-icon-two {
          transition: 0.5s;
          transform: translateX(-30%);
        }

        .btn-grill-animated:hover #arrow-icon-three {
          animation: color_anim 1s infinite 0.2s;
        }

        .btn-grill-animated:hover #arrow-icon-one {
          transform: translateX(0%);
          animation: color_anim 1s infinite 0.6s;
        }

        .btn-grill-animated:hover #arrow-icon-two {
          transform: translateX(0%);
          animation: color_anim 1s infinite 0.4s;
        }

        @keyframes color_anim {
          0% { fill: white; }
          50% { fill: var(--color-background); }
          100% { fill: white; }
        }

        @keyframes btn-content {
          0% {
            outline: 0.2em solid var(--color-background);
            outline-offset: 0;
          }
        }

    </style>
</head>
<body style="--bs-body-bg: var(--background-color); --bs-body-color: var(--text-color);">

    <div class="main-content" style="width: 100vw;">
        <main class="page-content">
            <div class="container-fluid">
                <!-- 1. 將結果區域移到最上方 -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <div id="simulationResults" class="p-2 border rounded text-center" style="height: 40px; line-height: 24px; background-color: #f8f9fa; overflow: hidden;">
                            <p class="text-muted m-0">請完成訂單...</p>
                        </div>
                    </div>
                </div>

                <!-- 烹飪模擬器區 -->
                <div id="simulatorSection">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-body">
                                    <!-- 1. 結果區與T2區域整合在一起 -->
                                    <div class="row mb-2">
                                        <div class="col-md-12">
                                            <!-- T2 最終料理區 -->
                                            <div id="t2ItemsContainer" class="d-flex flex-wrap gap-1 p-2 border rounded" style="min-height: 112px; background-color: #d4edda;">
                                            </div>
                                        </div>
                                        <!-- 移除舊的結果區域 -->
                                    </div>

                                    <!-- 新增: 隨機T2料理展示區 -->
                                    <div class="row mb-3">
                                        <div class="col-md-12">
                                            <div class="d-flex flex-column p-3 border rounded" style="background-color: transparent; min-height: 150px;">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <div id="randomT2Display" class="text-left">
                                                        <div id="randomT2Item" class="position-relative" style="width: 100px; height: 100px; margin-left: 0;"></div>
                                                    </div>
                                                    <div class="d-flex align-items-center gap-2">
                                                        <div class="d-flex flex-column">
                                                            <div class="d-flex gap-1">
                                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                            </div>
                                                            <div class="order-timer-bar-container mt-2">
                                                                <div id="orderTimerBar" class="order-timer-bar"></div>
                                                            </div>
                                                        </div>
                                                        <button class="btn-serve-order cooking-method-btn" data-method="assembly">
                                                            <div class="back"></div>
                                                            <div class="front"></div>
                                                        </button>
                                                    </div>
                                                </div>


                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <div id="randomT2Display2" class="text-left">
                                                        <div id="randomT2Item2" class="position-relative" style="width: 100px; height: 100px; margin-left: 0;"></div>
                                                    </div>
                                                    <div class="d-flex align-items-center gap-2">
                                                        <div class="d-flex flex-column">
                                                            <div class="d-flex gap-1">
                                                                <div class="crafting-slot order2-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot order2-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot order2-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                                <div class="crafting-slot order2-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                            </div>
                                                            <div class="order-timer-bar-container mt-2">
                                                                <div id="orderTimerBar2" class="order-timer-bar"></div>
                                                            </div>
                                                        </div>
                                                        <button class="btn-serve-order cooking-method-btn" data-method="assembly" data-order="2">
                                                            <div class="back"></div>
                                                            <div class="front"></div>
                                                        </button>
                                                    </div>
                                                </div>




                                            </div>



                                             



                                            
                                        </div>
                                    </div>

                                    

                                    

                                    <!-- 3. 工作組合區 -->
                                    <div class="row mb-2 align-items-center">
                                        <div class="col-md-12 mb-3">
                                            <!-- 現代化工具欄 -->
                                            <div class="d-flex justify-content-center mt-3 gap-2">
                                                <button class="btn-3d cooking-method-btn" data-method="grill">
                                                    <div class="base">
                                                        <div class="top grill">烤</div>
                                                    </div>
                                                </button>
                                                <button class="btn-3d cooking-method-btn" data-method="pan_fry">
                                                    <div class="base">
                                                        <div class="top pan-fry">煎</div>
                                                    </div>
                                                </button>
                                                <button class="btn-3d cooking-method-btn" data-method="deep_fry">
                                                    <div class="base">
                                                        <div class="top deep-fry">炸</div>
                                                    </div>
                                                </button>
                                                <button class="btn-3d cooking-method-btn" data-method="boil">
                                                    <div class="base">
                                                        <div class="top boil">煮</div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div id="craftingArea" class="d-flex flex-wrap gap-1 p-2 border rounded justify-content-center" style="background-color: #f8f9fa;">
                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                                <div class="crafting-slot border rounded d-flex justify-content-center align-items-center" style="width: 56px; height: 56px; background-color: white;"></div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                             <!-- 烹飪方法選擇 - 隱藏原來的按鈕 -->
                                            <div class="btn-group-vertical w-100" style="display: none;">
                                                <button class="btn btn-cooking cooking-method-btn mb-1" data-method="grill">烤製</button>
                                                <button class="btn btn-cooking cooking-method-btn mb-1" data-method="pan_fry">煎炒</button>
                                                <button class="btn btn-cooking cooking-method-btn mb-1" data-method="deep_fry">油炸</button>
                                                <button class="btn btn-cooking cooking-method-btn mb-1" data-method="boil">水煮</button>
                                                <button class="btn btn-outline-secondary cooking-method-btn" data-method="assembly">組合</button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 4. 分類按鈕 (T0 items) -->
                                    <div class="mb-2">
                                        <div class="d-flex justify-content-center mb-1">
                                            <div id="t0CategoryFilters" class="btn-group btn-group-sm" role="group">
                                                <!-- 分類按鈕將由JavaScript動態填充 -->
                                            </div>
                                        </div>
                                        <div id="t0ItemsContainer" class="d-flex flex-wrap gap-1 p-2 border rounded" style="min-height: 75px; background-color: #f8f9fa;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Synthesis Path Modal -->
            <div class="modal fade" id="synthesisPathModal" tabindex="-1" aria-labelledby="synthesisPathModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="synthesisPathModalLabel">合成路徑</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body" id="synthesisPathContent">
                            <!-- Path tree will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="cook-game.js"></script>

     
</body>
</html> 