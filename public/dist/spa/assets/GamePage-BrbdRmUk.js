import{c as h,a as l,h as y,g as _,i as B,z as P,A as k,B as z,t as x,C as f,r as s,o as H,s as F,u as d,x as u,y as m,D as Q,E as A,F as D}from"./index-DNNru8kJ.js";import{h as S}from"./dom-DpK6Arak.js";import{Q as I}from"./QBtn-CYfIE9Xq.js";import{Q as j}from"./QPage-BBAs57UB.js";import{api as W}from"./axios-da5i6RcF.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w=h({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(a,{slots:e}){const o=l(()=>`q-card__section q-card__section--${a.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>y(a.tag,{class:o.value},S(e.default))}}),N={dark:{type:Boolean,default:null}};function Z(a,e){return l(()=>a.dark===null?e.dark.isActive:a.dark)}const C=h({name:"QCard",props:{...N,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(a,{slots:e}){const{proxy:{$q:o}}=_(),r=Z(a,o),t=l(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(a.bordered===!0?" q-card--bordered":"")+(a.square===!0?" q-card--square no-border-radius":"")+(a.flat===!0?" q-card--flat no-shadow":""));return()=>y(a.tag,{class:t.value},S(e.default))}});function E(){return B(P)}const M={__name:"PetDisplay",props:{spriteSheet:{type:String,required:!0},frameWidth:{type:Number,required:!0},frameHeight:{type:Number,required:!0},totalFrames:{type:Number,required:!0},animationDuration:{type:String,default:"1s"}},setup(a){k(t=>({"4998e4aa":e.totalFrames,"3defb9b8":r.value}));const e=a,o=l(()=>({width:`${e.frameWidth}px`,height:`${e.frameHeight}px`,backgroundImage:`url(${e.spriteSheet})`,animationDuration:e.animationDuration})),r=l(()=>e.frameWidth*e.totalFrames);return(t,c)=>(x(),z("div",{class:"pet-sprite",style:f(o.value)},null,4))}},X=b(M,[["__scopeId","data-v-0e6e9dfc"]]),J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAAAAXNSR0IArs4c6QAABBZJREFUeJztm0+LFEcYxn8106OG6IaI5hBlpGEIQUk8iTclBw8xs4GcsrCHgXjJYchXWPIZ9JCDgnswzDmuBEkgKHgQLyaLIMnAoCwE9qBxVnT/dHfloFVbM9Pd0/+2W9d6YKG7pqp+z9v7zlvdtb1g9U5LFD2h67pSHQ8Gg8Lnfxu9VOWjdK7rutJ/cEP/mAbK1pvipSofSbm1IoH9pUsAeMdOAdBfukQVF/5N8VKVjzRcJ24SyF46FDir8vLzeimSn8VHWfGHVgCVQUmzteiMzsIv0sO7xI9dAv7+9fZUE6bZVrsLgPPonv48T8lLy4/rZ3qqgp/FRxnxRy4B4yZa7W7o5GqtMfrptiKUga/7qdKX5Zefhz9etk0frXY3VVnf6finJsAnX54ZAUWZjJJ37FTkhUmivHzlIWsSFMHPo52OP3YJUPC0arW7ub51eflFecjDN5U3+bIoafxTK0ASjRsdDAai1e7Kh8t3i5g+E991XZmn9ObhmyrDQ574C9sHsHo7NZEA5iZC7fh5Dp34anLQ8fPUQ9qL0G7hu66rK2Cab7/JL0OxS4Dj7MXnVRmTUiKEwN/yeL8hImuHuuEzy3/W0rdb+Fm15/Nv8P1NNp6vjvIPf4wMwF++kYgfF39oAjz5408AXjxb0W37Zk6ysfYX9YbD+n+rr/pdvQzAwS9OZo0xVLuNnzYBy4x/xJQQM/Lx4hzNTk+3ra/1mfmgxfBZnw/3f8TT56v6s2GIAbUZpPRw+S77D7TwAMQmMliPvBCWXz5fnyj4uJqdHutr/SjPwPZjTqvd5c7FBd1+ZPYHAMx53e9u4nmPJi6C5VfDF1FwGTQQtS1tQrc7go2n/4z0/fSz0wDcubigoeNgU27nKp7cjE0+yy+HL0x4vQ6+HzpmRGcWfhvJNAjPtjg1Oz2kHFp+xXznwHsHAXBqAZ6fbFvg9o/nRjItDXhcll8tv7b28gkAXpBuT+jx4pyG/rv4LQDSWNmESHbTa/nV8vU9gJo0jZqdHj99fYLvf3mgx9ZrDn7gxY4BkHI4sgZafjX8icfApEaanR4rvXmWfr7PkcOHmL1yK3bcNvgF4IWmp+WXz5/YCFrpzXN07po+T5qV1y+c1RBzjGq7fuEsAO3LvwPRGWr55fJDdwJXevP6WJkZn9TsY5owoWabltgL8mVsMJZfHn/qn4MVyMzKMHiYkTAJAtK8H2b5O8tP/D5AKFSmu3PdauxBykaqMZa/s/yRBJByKI7OXZPTMmxb4QYkk/9yNHvl1uujYeTzieWXz5+oAMqEOh83IyTUhMBHEkSEYjYrsPnYEyfLL5cfugSYncfNSAH+61UkarNhO9uSB2751fCn3gPEmanJIBScJWjLr4af2ajatFBvqqQF55XlF8P/H2FKxX8iPAWEAAAAAElFTkSuQmCC",L={class:"text-h6"},V={class:"absolute-bottom text-center q-pa-md"},T={__name:"GamePage",setup(a){const e=E(),o=s("我的寵物"),r=s([]),t=s({name:"載入中...",color:"#ccc"}),c=s(!0),p=s(50),g=s(150),q=l(()=>({position:"absolute",top:`${g.value}px`,left:`${p.value}px`,transition:"all 1s ease-in-out",filter:`drop-shadow(0 0 15px ${t.value.color})`}));function v(){if(r.value.length===0)return;const n=Math.floor(Math.random()*r.value.length),i=r.value[n];t.value={name:i.state_name,color:i.state_symbol},p.value=Math.random()*300,g.value=150+Math.random()*150,e.notify({message:`寵物的心情變成了「${t.value.name}」！`,color:"deep-purple",icon:"sentiment_very_satisfied",position:"top"})}return H(async()=>{try{const n=await W.get("/api/pet/states");r.value=n.data,r.value.length>0?v():t.value={name:"沒有可用狀態",color:"#ccc"}}catch(n){console.error("獲取寵物狀態列表失敗:",n),t.value={name:"讀取狀態失敗 :(",color:"red"},e.notify({type:"negative",message:"無法從伺服器讀取寵物狀態！"})}finally{c.value=!1}}),(n,i)=>(x(),F(j,{class:"q-pa-md game-area"},{default:d(()=>[u(C,{class:"q-mb-md text-center",style:{"max-width":"400px",margin:"0 auto"},flat:"",bordered:""},{default:d(()=>[u(w,null,{default:d(()=>[m("div",L,[Q(A(o.value)+" - ",1),m("span",{style:f({color:t.value.color})},A(t.value.name),5)])]),_:1})]),_:1}),u(X,{spriteSheet:D(J),frameWidth:32,frameHeight:32,totalFrames:4,style:f(q.value)},null,8,["spriteSheet","style"]),m("div",V,[u(I,{color:"primary",size:"lg",push:"",label:"改變狀態",icon:"shuffle",onClick:v,loading:c.value},null,8,["loading"])])]),_:1}))}},$=b(T,[["__scopeId","data-v-ad03a07d"]]);export{$ as default};
