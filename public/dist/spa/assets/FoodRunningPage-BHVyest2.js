import{c as _e,$ as ll,af as _t,a7 as al,a2 as nl,ag as Tl,a9 as ol,g as tt,aa as il,ah as Al,r as _,a as d,h as x,ai as ul,s as Oe,aj as Ml,b as kt,ak as Ol,w as we,n as ze,al as rl,am as Bl,o as sl,f as cl,ae as lt,a0 as dl,a3 as $l,a5 as Rt,an as Hl,ao as Xe,ap as Dl,a8 as mt,aq as Fl,ar as Ll,Q as rt,E as Pe,as as vl,y as Ct,C as Rl,D as ce,at as El,au as Et,t as Pl,j as zt,av as jl,aw as Ql,v as gt,M as wt,ax as ht,ay as Pt,u as Ye,F as ue,G as oe,L as j,J as pe,az as Ge,I as A,Y as Ae,K as C,P as Me,V as he,R as Ve,ad as je,Z as Qe,H as Nl,T as jt,aA as Wl,W as Qt,X as yt,aB as Kl,aC as Ul}from"./index-DYK3U5_v.js";import{n as Nt,Q as Xl,b as Je,T as Wt}from"./TouchPan-DO0wDzvO.js";import{b as Yl,c as Gl,a as Kt,Q as Jl,C as Zl}from"./ClosePopup-DcOhUuyO.js";import{Q as ea}from"./QPage-CQePgJIi.js";import{u as ta}from"./use-quasar-Cu2JO6wp.js";import{P as la}from"./PetDisplay-3BJlC776.js";import{a as ot}from"./index-Dq7h7Pqt.js";import{n as aa}from"./index-J1xnI5EH.js";import Ze from"./Basic Charakter Spritesheet-face-DGcq_MBM.js";import na from"./Basic Charakter Spritesheet-left-CGJoGvDD.js";import oa from"./Basic Charakter Spritesheet-righ-BUuq8Otu.js";import ia from"./Basic Charakter Spritesheet-back-B9rVEyHH.js";import ua from"./restaurant_map-BOdnv5Gh.js";import{_ as ra}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./selection-D3y8JduA.js";const sa=_e({name:"QField",inheritAttrs:!1,props:{..._t,tag:{type:String,default:"label"}},emits:ll,setup(){return al(nl({tagProp:!0}))}}),ca=_e({name:"QItem",props:{...ol,...Tl,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:o,emit:n}){const{proxy:{$q:w}}=tt(),V=il(e,w),{hasLink:c,linkAttrs:m,linkClass:l,linkTag:s,navigateOnClick:y}=Al(),r=_(null),h=_(null),v=d(()=>e.clickable===!0||c.value===!0||e.tag==="label"),p=d(()=>e.disable!==!0&&v.value===!0),I=d(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(V.value===!0?" q-item--dark":"")+(c.value===!0&&e.active===null?l.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(p.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),T=d(()=>e.insetLevel===void 0?null:{["padding"+(w.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function Q(q){p.value===!0&&(h.value!==null&&q.qAvoidFocus!==!0&&(q.qKeyEvent!==!0&&document.activeElement===r.value?h.value.focus():document.activeElement===h.value&&r.value.focus()),y(q))}function O(q){if(p.value===!0&&ul(q,[13,32])===!0){Oe(q),q.qKeyEvent=!0;const E=new MouseEvent("click",q);E.qKeyEvent=!0,r.value.dispatchEvent(E)}n("keyup",q)}function Y(){const q=Ml(o.default,[]);return p.value===!0&&q.unshift(x("div",{class:"q-focus-helper",tabindex:-1,ref:h})),q}return()=>{const q={ref:r,class:I.value,style:T.value,role:"listitem",onClick:Q,onKeyup:O};return p.value===!0?(q.tabindex=e.tabindex||"0",Object.assign(q,m.value)):v.value===!0&&(q["aria-disabled"]="true"),x(s.value,q,Y())}}}),da=_e({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:o}){const n=d(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>x("div",{class:n.value},kt(o.default))}}),va=_e({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:o}){const n=d(()=>parseInt(e.lines,10)),w=d(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),V=d(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>x("div",{style:V.value,class:w.value},kt(o.default))}});let st=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,st=e.scrollLeft>=0,e.remove()}const ye=1e3,fa=["start","center","end","start-force","center-force","end-force"],fl=Array.prototype.filter,ma=window.getComputedStyle(document.body).overflowAnchor===void 0?Ol:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const n=e.children||[];fl.call(n,V=>V.dataset&&V.dataset.qVsAnchor!==void 0).forEach(V=>{delete V.dataset.qVsAnchor});const w=n[o];w?.dataset&&(w.dataset.qVsAnchor="")}))};function Ke(e,o){return e+o}function St(e,o,n,w,V,c,m,l){const s=e===window?document.scrollingElement||document.documentElement:e,y=V===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-m-l,scrollMaxSize:0,offsetStart:-m,offsetEnd:-l};if(V===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=s.scrollLeft,r.scrollViewSize+=s.clientWidth),r.scrollMaxSize=s.scrollWidth,c===!0&&(r.scrollStart=(st===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=s.scrollTop,r.scrollViewSize+=s.clientHeight),r.scrollMaxSize=s.scrollHeight),n!==null)for(let h=n.previousElementSibling;h!==null;h=h.previousElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=h[y]);if(w!==null)for(let h=w.nextElementSibling;h!==null;h=h.nextElementSibling)h.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=h[y]);if(o!==e){const h=s.getBoundingClientRect(),v=o.getBoundingClientRect();V===!0?(r.offsetStart+=v.left-h.left,r.offsetEnd-=v.width):(r.offsetStart+=v.top-h.top,r.offsetEnd-=v.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function Ut(e,o,n,w){o==="end"&&(o=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(w===!0&&(o=(st===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):n===!0?(w===!0&&(o=(st===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function et(e,o,n,w){if(n>=w)return 0;const V=o.length,c=Math.floor(n/ye),m=Math.floor((w-1)/ye)+1;let l=e.slice(c,m).reduce(Ke,0);return n%ye!==0&&(l-=o.slice(c*ye,n).reduce(Ke,0)),w%ye!==0&&w!==V&&(l-=o.slice(w,m*ye).reduce(Ke,0)),l}const ga={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Xt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ga};function ha({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:n,virtualScrollItemSizeComputed:w}){const V=tt(),{props:c,emit:m,proxy:l}=V,{$q:s}=l;let y,r,h,v=[],p;const I=_(0),T=_(0),Q=_({}),O=_(null),Y=_(null),q=_(null),E=_({from:0,to:0}),re=d(()=>c.tableColspan!==void 0?c.tableColspan:100);w===void 0&&(w=d(()=>c.virtualScrollItemSize));const W=d(()=>w.value+";"+c.virtualScrollHorizontal),G=d(()=>W.value+";"+c.virtualScrollSliceRatioBefore+";"+c.virtualScrollSliceRatioAfter);we(G,()=>{f()}),we(W,ie);function ie(){z(r,!0)}function ee(a){z(a===void 0?r:a)}function ne(a,g){const $=o();if($==null||$.nodeType===8)return;const K=St($,n(),O.value,Y.value,c.virtualScrollHorizontal,s.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd);h!==K.scrollViewSize&&f(K.scrollViewSize),u($,K,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,fa.indexOf(g)!==-1?g:r!==-1&&a>r?"end":"start")}function de(){const a=o();if(a==null||a.nodeType===8)return;const g=St(a,n(),O.value,Y.value,c.virtualScrollHorizontal,s.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd),$=e.value-1,K=g.scrollMaxSize-g.offsetStart-g.offsetEnd-T.value;if(y===g.scrollStart)return;if(g.scrollMaxSize<=0){u(a,g,0,0);return}h!==g.scrollViewSize&&f(g.scrollViewSize),M(E.value.from);const J=Math.floor(g.scrollMaxSize-Math.max(g.scrollViewSize,g.offsetEnd)-Math.min(p[$],g.scrollViewSize/2));if(J>0&&Math.ceil(g.scrollStart)>=J){u(a,g,$,g.scrollMaxSize-g.offsetEnd-v.reduce(Ke,0));return}let N=0,L=g.scrollStart-g.offsetStart,le=L;if(L<=K&&L+g.scrollViewSize>=I.value)L-=I.value,N=E.value.from,le=L;else for(let F=0;L>=v[F]&&N<$;F++)L-=v[F],N+=ye;for(;L>0&&N<$;)L-=p[N],L>-g.scrollViewSize?(N++,le=L):le=p[N]+L;u(a,g,N,le)}function u(a,g,$,K,J){const N=typeof J=="string"&&J.indexOf("-force")!==-1,L=N===!0?J.replace("-force",""):J,le=L!==void 0?L:"start";let F=Math.max(0,$-Q.value[le]),Z=F+Q.value.total;Z>e.value&&(Z=e.value,F=Math.max(0,Z-Q.value.total)),y=g.scrollStart;const Se=F!==E.value.from||Z!==E.value.to;if(Se===!1&&L===void 0){B($);return}const{activeElement:Be}=document,ge=q.value;Se===!0&&ge!==null&&ge!==Be&&ge.contains(Be)===!0&&(ge.addEventListener("focusout",i),setTimeout(()=>{ge?.removeEventListener("focusout",i)})),ma(ge,$-F);const $e=L!==void 0?p.slice(F,$).reduce(Ke,0):0;if(Se===!0){const ke=Z>=E.value.from&&F<=E.value.to?E.value.to:Z;E.value={from:F,to:ke},I.value=et(v,p,0,F),T.value=et(v,p,Z,e.value),requestAnimationFrame(()=>{E.value.to!==Z&&y===g.scrollStart&&(E.value={from:E.value.from,to:Z},T.value=et(v,p,Z,e.value))})}requestAnimationFrame(()=>{if(y!==g.scrollStart)return;Se===!0&&M(F);const ke=p.slice(F,$).reduce(Ke,0),Ce=ke+g.offsetStart+I.value,be=Ce+p[$];let D=Ce+K;if(L!==void 0){const k=ke-$e,fe=g.scrollStart+k;D=N!==!0&&fe<Ce&&be<fe+g.scrollViewSize?fe:L==="end"?be-g.scrollViewSize:Ce-(L==="start"?0:Math.round((g.scrollViewSize-p[$])/2))}y=D,Ut(a,D,c.virtualScrollHorizontal,s.lang.rtl),B($)})}function M(a){const g=q.value;if(g){const $=fl.call(g.children,F=>F.classList&&F.classList.contains("q-virtual-scroll--skip")===!1),K=$.length,J=c.virtualScrollHorizontal===!0?F=>F.getBoundingClientRect().width:F=>F.offsetHeight;let N=a,L,le;for(let F=0;F<K;){for(L=J($[F]),F++;F<K&&$[F].classList.contains("q-virtual-scroll--with-prev")===!0;)L+=J($[F]),F++;le=L-p[N],le!==0&&(p[N]+=le,v[Math.floor(N/ye)]+=le),N++}}}function i(){q.value?.focus()}function z(a,g){const $=1*w.value;(g===!0||Array.isArray(p)===!1)&&(p=[]);const K=p.length;p.length=e.value;for(let N=e.value-1;N>=K;N--)p[N]=$;const J=Math.floor((e.value-1)/ye);v=[];for(let N=0;N<=J;N++){let L=0;const le=Math.min((N+1)*ye,e.value);for(let F=N*ye;F<le;F++)L+=p[F];v.push(L)}r=-1,y=void 0,I.value=et(v,p,0,E.value.from),T.value=et(v,p,E.value.to,e.value),a>=0?(M(E.value.from),ze(()=>{ne(a)})):P()}function f(a){if(a===void 0&&typeof window<"u"){const L=o();L!=null&&L.nodeType!==8&&(a=St(L,n(),O.value,Y.value,c.virtualScrollHorizontal,s.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd).scrollViewSize)}h=a;const g=parseFloat(c.virtualScrollSliceRatioBefore)||0,$=parseFloat(c.virtualScrollSliceRatioAfter)||0,K=1+g+$,J=a===void 0||a<=0?1:Math.ceil(a/w.value),N=Math.max(1,J,Math.ceil((c.virtualScrollSliceSize>0?c.virtualScrollSliceSize:10)/K));Q.value={total:Math.ceil(N*K),start:Math.ceil(N*g),center:Math.ceil(N*(.5+g)),end:Math.ceil(N*(1+g)),view:J}}function H(a,g){const $=c.virtualScrollHorizontal===!0?"width":"height",K={["--q-virtual-scroll-item-"+$]:w.value+"px"};return[a==="tbody"?x(a,{class:"q-virtual-scroll__padding",key:"before",ref:O},[x("tr",[x("td",{style:{[$]:`${I.value}px`,...K},colspan:re.value})])]):x(a,{class:"q-virtual-scroll__padding",key:"before",ref:O,style:{[$]:`${I.value}px`,...K}}),x(a,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},g.flat()),a==="tbody"?x(a,{class:"q-virtual-scroll__padding",key:"after",ref:Y},[x("tr",[x("td",{style:{[$]:`${T.value}px`,...K},colspan:re.value})])]):x(a,{class:"q-virtual-scroll__padding",key:"after",ref:Y,style:{[$]:`${T.value}px`,...K}})]}function B(a){r!==a&&(c.onVirtualScroll!==void 0&&m("virtualScroll",{index:a,from:E.value.from,to:E.value.to-1,direction:a<r?"decrease":"increase",ref:l}),r=a)}f();const P=rl(de,s.platform.is.ios===!0?120:35);Bl(()=>{f()});let te=!1;return sl(()=>{te=!0}),cl(()=>{if(te!==!0)return;const a=o();y!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?Ut(a,y,c.virtualScrollHorizontal,s.lang.rtl):ne(r)}),lt(()=>{P.cancel()}),Object.assign(l,{scrollTo:ne,reset:ie,refresh:ee}),{virtualScrollSliceRange:E,virtualScrollSliceSizeComputed:Q,setVirtualScrollSize:f,onVirtualScrollEvt:P,localResetVirtualScroll:z,padVirtualScroll:H,scrollTo:ne,reset:ie,refresh:ee}}const Yt=e=>["add","add-unique","toggle"].includes(e),ya=".*+?^${}()|[]\\",Sa=Object.keys(_t);function bt(e,o){if(typeof e=="function")return e;const n=e!==void 0?e:o;return w=>w!==null&&typeof w=="object"&&n in w?w[n]:w}const ba=_e({name:"QSelect",inheritAttrs:!1,props:{...Xt,...dl,..._t,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Yt},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Xt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...ll,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:o,emit:n}){const{proxy:w}=tt(),{$q:V}=w,c=_(!1),m=_(!1),l=_(-1),s=_(""),y=_(!1),r=_(!1);let h=null,v=null,p,I,T,Q=null,O,Y,q,E;const re=_(null),W=_(null),G=_(null),ie=_(null),ee=_(null),ne=$l(e),de=Hl($t),u=d(()=>Array.isArray(e.options)?e.options.length:0),M=d(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:i,virtualScrollSliceSizeComputed:z,localResetVirtualScroll:f,padVirtualScroll:H,onVirtualScrollEvt:B,scrollTo:P,setVirtualScrollSize:te}=ha({virtualScrollLength:u,getVirtualScrollTarget:yl,getVirtualScrollEl:Ot,virtualScrollItemSizeComputed:M}),a=nl(),g=d(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,S=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const b=e.mapOptions===!0&&p!==void 0?p:[],R=S.map(X=>hl(X,b));return e.modelValue===null&&t===!0?R.filter(X=>X!==null):R}return S}),$=d(()=>{const t={};return Sa.forEach(S=>{const b=e[S];b!==void 0&&(t[S]=b)}),t}),K=d(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),J=d(()=>Rt(g.value)),N=d(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),L=d(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),le=d(()=>u.value===0),F=d(()=>g.value.map(t=>ve.value(t)).join(", ")),Z=d(()=>e.displayValue!==void 0?e.displayValue:F.value),Se=d(()=>e.optionsHtml===!0?()=>!0:t=>t?.html===!0),Be=d(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(Se.value))),ge=d(()=>a.focused.value===!0?e.tabindex:-1),$e=d(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return l.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${l.value}`),t}),ke=d(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ce=d(()=>g.value.map((t,S)=>({index:S,opt:t,html:Se.value(t),selected:!0,removeAtIndex:gl,toggleOption:Ie,tabindex:ge.value}))),be=d(()=>{if(u.value===0)return[];const{from:t,to:S}=i.value;return e.options.slice(t,S).map((b,R)=>{const X=xe.value(b)===!0,U=dt(b)===!0,se=t+R,ae={clickable:!0,active:U,activeClass:fe.value,manualFocus:!0,focused:!1,disable:X,tabindex:-1,dense:e.optionsDense,dark:K.value,role:"option","aria-selected":U===!0?"true":"false",id:`${a.targetUid.value}_${se}`,onClick:()=>{Ie(b)}};return X!==!0&&(l.value===se&&(ae.focused=!0),V.platform.is.desktop===!0&&(ae.onMousemove=()=>{c.value===!0&&De(se)})),{index:se,opt:b,html:Se.value(b),label:ve.value(b),selected:ae.active,focused:ae.focused,toggleOption:Ie,setOptionIndex:De,itemProps:ae}})}),D=d(()=>e.dropdownIcon!==void 0?e.dropdownIcon:V.iconSet.arrow.dropdown),k=d(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),fe=d(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),me=d(()=>bt(e.optionValue,"value")),ve=d(()=>bt(e.optionLabel,"label")),xe=d(()=>bt(e.optionDisable,"disable")),He=d(()=>g.value.map(me.value)),ml=d(()=>{const t={onInput:$t,onChange:de,onKeydown:Mt,onKeyup:Tt,onKeypress:At,onFocus:qt,onClick(S){I===!0&&Pe(S)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=de,t});we(g,t=>{p=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(m.value!==!0&&c.value!==!0||J.value!==!0)&&(T!==!0&&Ee(),(m.value===!0||c.value===!0)&&Fe(""))},{immediate:!0}),we(()=>e.fillInput,Ee),we(c,vt),we(u,Il);function xt(t){return e.emitValue===!0?me.value(t):t}function ct(t){if(t!==-1&&t<g.value.length)if(e.multiple===!0){const S=e.modelValue.slice();n("remove",{index:t,value:S.splice(t,1)[0]}),n("update:modelValue",S)}else n("update:modelValue",null)}function gl(t){ct(t),a.focus()}function Vt(t,S){const b=xt(t);if(e.multiple!==!0){e.fillInput===!0&&Ue(ve.value(t),!0,!0),n("update:modelValue",b);return}if(g.value.length===0){n("add",{index:0,value:b}),n("update:modelValue",e.multiple===!0?[b]:b);return}if(S===!0&&dt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const R=e.modelValue.slice();n("add",{index:R.length,value:b}),R.push(b),n("update:modelValue",R)}function Ie(t,S){if(a.editable.value!==!0||t===void 0||xe.value(t)===!0)return;const b=me.value(t);if(e.multiple!==!0){S!==!0&&(Ue(e.fillInput===!0?ve.value(t):"",!0,!0),Te()),W.value?.focus(),(g.value.length===0||Xe(me.value(g.value[0]),b)!==!0)&&n("update:modelValue",e.emitValue===!0?b:t);return}if((I!==!0||y.value===!0)&&a.focus(),qt(),g.value.length===0){const U=e.emitValue===!0?b:t;n("add",{index:0,value:U}),n("update:modelValue",e.multiple===!0?[U]:U);return}const R=e.modelValue.slice(),X=He.value.findIndex(U=>Xe(U,b));if(X!==-1)n("remove",{index:X,value:R.splice(X,1)[0]});else{if(e.maxValues!==void 0&&R.length>=e.maxValues)return;const U=e.emitValue===!0?b:t;n("add",{index:R.length,value:U}),R.push(U)}n("update:modelValue",R)}function De(t){if(V.platform.is.desktop!==!0)return;const S=t!==-1&&t<u.value?t:-1;l.value!==S&&(l.value=S)}function at(t=1,S){if(c.value===!0){let b=l.value;do b=Nt(b+t,-1,u.value-1);while(b!==-1&&b!==l.value&&xe.value(e.options[b])===!0);l.value!==b&&(De(b),P(b),S!==!0&&e.useInput===!0&&e.fillInput===!0&&nt(b>=0?ve.value(e.options[b]):O,!0))}}function hl(t,S){const b=R=>Xe(me.value(R),t);return e.options.find(b)||S.find(b)||t}function dt(t){const S=me.value(t);return He.value.find(b=>Xe(b,S))!==void 0}function qt(t){e.useInput===!0&&W.value!==null&&(t===void 0||W.value===t.target&&t.target.value===F.value)&&W.value.select()}function It(t){ul(t,27)===!0&&c.value===!0&&(Pe(t),Te(),Ee()),n("keyup",t)}function Tt(t){const{value:S}=t.target;if(t.keyCode!==void 0){It(t);return}if(t.target.value="",h!==null&&(clearTimeout(h),h=null),v!==null&&(clearTimeout(v),v=null),Ee(),typeof S=="string"&&S.length!==0){const b=S.toLocaleLowerCase(),R=U=>{const se=e.options.find(ae=>String(U.value(ae)).toLocaleLowerCase()===b);return se===void 0?!1:(g.value.indexOf(se)===-1?Ie(se):Te(),!0)},X=U=>{R(me)!==!0&&U!==!0&&R(ve)!==!0&&Fe(S,!0,()=>X(!0))};X()}else a.clearValue(t)}function At(t){n("keypress",t)}function Mt(t){if(n("keydown",t),Dl(t)===!0)return;const S=s.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),b=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(l.value!==-1||S===!0);if(t.keyCode===27){mt(t);return}if(t.keyCode===9&&b===!1){Le();return}if(t.target===void 0||t.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&c.value===!1){Oe(t),Re();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&s.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ct(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof s.value!="string"||s.value.length===0)&&(Oe(t),l.value=-1,at(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&z.value!==void 0&&(Oe(t),l.value=Math.max(-1,Math.min(u.value,l.value+(t.keyCode===33?-1:1)*z.value.view)),at(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(Oe(t),at(t.keyCode===38?-1:1,e.multiple));const R=u.value;if((q===void 0||E<Date.now())&&(q=""),R>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||q.length!==0)){c.value!==!0&&Re(t);const X=t.key.toLocaleLowerCase(),U=q.length===1&&q[0]===X;E=Date.now()+1500,U===!1&&(Oe(t),q+=X);const se=new RegExp("^"+q.split("").map(ft=>ya.indexOf(ft)!==-1?"\\"+ft:ft).join(".*"),"i");let ae=l.value;if(U===!0||ae<0||se.test(ve.value(e.options[ae]))!==!0)do ae=Nt(ae+1,-1,R-1);while(ae!==l.value&&(xe.value(e.options[ae])===!0||se.test(ve.value(e.options[ae]))!==!0));l.value!==ae&&ze(()=>{De(ae),P(ae),ae>=0&&e.useInput===!0&&e.fillInput===!0&&nt(ve.value(e.options[ae]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||q!=="")&&(t.keyCode!==9||b===!1))){if(t.keyCode!==9&&Oe(t),l.value!==-1&&l.value<R){Ie(e.options[l.value]);return}if(S===!0){const X=(U,se)=>{if(se){if(Yt(se)!==!0)return}else se=e.newValueMode;if(Ue("",e.multiple!==!0,!0),U==null)return;(se==="toggle"?Ie:Vt)(U,se==="add-unique"),e.multiple!==!0&&(W.value?.focus(),Te())};if(e.onNewValue!==void 0?n("newValue",s.value,X):X(s.value),e.multiple!==!0)return}c.value===!0?Le():a.innerLoading.value!==!0&&Re()}}function Ot(){return I===!0?ee.value:G.value!==null&&G.value.contentEl!==null?G.value.contentEl:void 0}function yl(){return Ot()}function Sl(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?Ce.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?Ce.value.map((t,S)=>x(Xl,{key:"option-"+S,removable:a.editable.value===!0&&xe.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:ge.value,onRemove(){t.removeAtIndex(S)}},()=>x("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:ve.value(t.opt)}))):[x("span",{class:"ellipsis",[Be.value===!0?"innerHTML":"textContent"]:Z.value})]}function Bt(){if(le.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:s.value}):void 0;const t=o.option!==void 0?o.option:b=>x(ca,{key:b.index,...b.itemProps},()=>x(da,()=>x(va,()=>x("span",{[b.html===!0?"innerHTML":"textContent"]:b.label}))));let S=H("div",be.value.map(t));return o["before-options"]!==void 0&&(S=o["before-options"]().concat(S)),Ct(o["after-options"],S)}function bl(t,S){const b=S===!0?{...$e.value,...a.splitAttrs.attributes.value}:void 0,R={ref:S===!0?W:void 0,key:"i_t",class:N.value,style:e.inputStyle,value:s.value!==void 0?s.value:"",type:"search",...b,id:S===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ml.value};return t!==!0&&I===!0&&(Array.isArray(R.class)===!0?R.class=[...R.class,"no-pointer-events"]:R.class+=" no-pointer-events"),x("input",R)}function $t(t){h!==null&&(clearTimeout(h),h=null),v!==null&&(clearTimeout(v),v=null),!(t&&t.target&&t.target.qComposing===!0)&&(nt(t.target.value||""),T=!0,O=s.value,a.focused.value!==!0&&(I!==!0||y.value===!0)&&a.focus(),e.onFilter!==void 0&&(h=setTimeout(()=>{h=null,Fe(s.value)},e.inputDebounce)))}function nt(t,S){s.value!==t&&(s.value=t,S===!0||e.inputDebounce===0||e.inputDebounce==="0"?n("inputValue",t):v=setTimeout(()=>{v=null,n("inputValue",t)},e.inputDebounce))}function Ue(t,S,b){T=b!==!0,e.useInput===!0&&(nt(t,!0),(S===!0||b!==!0)&&(O=t),S!==!0&&Fe(t))}function Fe(t,S,b){if(e.onFilter===void 0||S!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?n("filterAbort"):(a.innerLoading.value=!0,r.value=!0),t!==""&&e.multiple!==!0&&g.value.length!==0&&T!==!0&&t===ve.value(g.value[0])&&(t="");const R=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);Q!==null&&clearTimeout(Q),Q=R,n("filter",t,(X,U)=>{(S===!0||a.focused.value===!0)&&Q===R&&(clearTimeout(Q),typeof X=="function"&&X(),r.value=!1,ze(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(S===!0?c.value===!0&&Te():c.value===!0?vt(!0):c.value=!0),typeof U=="function"&&ze(()=>{U(w)}),typeof b=="function"&&ze(()=>{b(w)})}))},()=>{a.focused.value===!0&&Q===R&&(clearTimeout(Q),a.innerLoading.value=!1,r.value=!1),c.value===!0&&(c.value=!1)})}function pl(){return x(Yl,{ref:G,class:L.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&le.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:K.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:k.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ke.value,onScrollPassive:B,onBeforeShow:Dt,onBeforeHide:wl,onShow:_l},Bt)}function wl(t){Ft(t),Le()}function _l(){te()}function kl(t){Pe(t),W.value?.focus(),y.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Cl(t){Pe(t),ze(()=>{y.value=!1})}function zl(){const t=[x(sa,{class:`col-auto ${a.fieldClass.value}`,...$.value,for:a.targetUid.value,dark:K.value,square:!0,loading:r.value,itemAligned:!1,filled:!0,stackLabel:s.value.length!==0,...a.splitAttrs.listeners.value,onFocus:kl,onBlur:Cl},{...o,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&t.push(x("div",{ref:ee,class:L.value+" scroll",style:e.popupContentStyle,...ke.value,onClick:mt,onScrollPassive:B},Bt())),x(vl,{ref:ie,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:Y,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Dt,onBeforeHide:xl,onHide:Vl,onShow:ql},()=>x("div",{class:"q-select__dialog"+(K.value===!0?" q-select__dialog--dark q-dark":"")+(y.value===!0?" q-select__dialog--focused":"")},t))}function xl(t){Ft(t),ie.value!==null&&ie.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function Vl(t){Te(),a.focused.value===!1&&n("blur",t),Ee()}function ql(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&W.value!==null&&W.value!==t&&W.value.focus(),te()}function Le(){m.value!==!0&&(l.value=-1,c.value===!0&&(c.value=!1),a.focused.value===!1&&(Q!==null&&(clearTimeout(Q),Q=null),a.innerLoading.value===!0&&(n("filterAbort"),a.innerLoading.value=!1,r.value=!1)))}function Re(t){a.editable.value===!0&&(I===!0?(a.onControlFocusin(t),m.value=!0,ze(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?Fe(s.value):(le.value!==!0||o["no-option"]!==void 0)&&(c.value=!0))}function Te(){m.value=!1,Le()}function Ee(){e.useInput===!0&&Ue(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&ve.value(g.value[0])||"",!0,!0)}function vt(t){let S=-1;if(t===!0){if(g.value.length!==0){const b=me.value(g.value[0]);S=e.options.findIndex(R=>Xe(me.value(R),b))}f(S)}De(S)}function Il(t,S){c.value===!0&&a.innerLoading.value===!1&&(f(-1,!0),ze(()=>{c.value===!0&&a.innerLoading.value===!1&&(t>S?f():vt(!0))}))}function Ht(){m.value===!1&&G.value!==null&&G.value.updatePosition()}function Dt(t){t!==void 0&&Pe(t),n("popupShow",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function Ft(t){t!==void 0&&Pe(t),n("popupHide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function Lt(){I=V.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||le.value===!1:!0),Y=V.platform.is.ios===!0&&I===!0&&e.useInput===!0?"fade":e.transitionShow}return Fl(Lt),Ll(Ht),Lt(),lt(()=>{h!==null&&clearTimeout(h),v!==null&&clearTimeout(v)}),Object.assign(w,{showPopup:Re,hidePopup:Te,removeAtIndex:ct,add:Vt,toggleOption:Ie,getOptionIndex:()=>l.value,setOptionIndex:De,moveOptionSelection:at,filter:Fe,updateMenuPosition:Ht,updateInputValue:Ue,isOptionSelected:dt,getEmittingOptionValue:xt,isOptionDisabled:(...t)=>xe.value.apply(null,t)===!0,getOptionValue:(...t)=>me.value.apply(null,t),getOptionLabel:(...t)=>ve.value.apply(null,t)}),Object.assign(a,{innerValue:g,fieldClass:d(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:re,targetRef:W,hasValue:J,showPopup:Re,floatingLabel:d(()=>e.hideSelected!==!0&&J.value===!0||typeof s.value=="number"||s.value.length!==0||Rt(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(m.value===!0||le.value!==!0||o["no-option"]!==void 0))return I===!0?zl():pl();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{Ee(),Le()})},onClick(t){if(mt(t),I!==!0&&c.value===!0){Le(),W.value?.focus();return}Re(t)}},getControl:t=>{const S=Sl(),b=t===!0||m.value!==!0||I!==!0;if(e.useInput===!0)S.push(bl(t,b));else if(a.editable.value===!0){const X=b===!0?$e.value:void 0;S.push(x("input",{ref:b===!0?W:void 0,key:"d_t",class:"q-select__focus-target",id:b===!0?a.targetUid.value:void 0,value:Z.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...X,onKeydown:Mt,onKeyup:It,onKeypress:At})),b===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&S.push(x("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Tt}))}if(ne.value!==void 0&&e.disable!==!0&&He.value.length!==0){const X=He.value.map(U=>x("option",{value:U,selected:!0}));S.push(x("select",{class:"hidden",name:ne.value,multiple:e.multiple},X))}const R=e.useInput===!0||b!==!0?void 0:a.splitAttrs.attributes.value;return x("div",{class:"q-field__native row items-center",...R,...a.splitAttrs.listeners.value},S)},getInnerAppend:()=>e.loading!==!0&&r.value!==!0&&e.hideDropdownIcon!==!0?[x(rt,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:D.value})]:null}),al(a)}}),pa=_e({name:"QBtnToggle",props:{...dl,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(o=>("label"in o||"icon"in o||"slot"in o)&&"value"in o)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:o,emit:n}){const w=d(()=>e.options.find(v=>v.value===e.modelValue)!==void 0),V=d(()=>({type:"hidden",name:e.name,value:e.modelValue})),c=El(V),m=d(()=>Rl(e)),l=d(()=>({rounded:e.rounded,dense:e.dense,...m.value})),s=d(()=>e.options.map((v,p)=>{const{attrs:I,value:T,slot:Q,...O}=v;return{slot:Q,props:{key:p,"aria-pressed":T===e.modelValue?"true":"false",...I,...O,...l.value,disable:e.disable===!0||O.disable===!0,color:T===e.modelValue?r(O,"toggleColor"):r(O,"color"),textColor:T===e.modelValue?r(O,"toggleTextColor"):r(O,"textColor"),noCaps:r(O,"noCaps")===!0,noWrap:r(O,"noWrap")===!0,size:r(O,"size"),padding:r(O,"padding"),ripple:r(O,"ripple"),stack:r(O,"stack")===!0,stretch:r(O,"stretch")===!0,onClick(Y){y(T,v,Y)}}}}));function y(v,p,I){e.readonly!==!0&&(e.modelValue===v?e.clearable===!0&&(n("update:modelValue",null,null),n("clear")):n("update:modelValue",v,p),n("click",I))}function r(v,p){return v[p]===void 0?e[p]:v[p]}function h(){const v=s.value.map(p=>x(ce,p.props,p.slot!==void 0?o[p.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&w.value===!0&&c(v,"push"),Ct(o.default,v)}return()=>x(Gl,{class:"q-btn-toggle",...m.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},h)}}),wa=_e({name:"QSpace",setup(){const e=x("div",{class:"q-space"});return()=>e}}),_a={ratio:[String,Number]};function ka(e,o){return d(()=>{const n=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const Ca=1.7778,za=_e({name:"QImg",props:{..._a,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ca},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:n}){const w=_(e.initialRatio),V=ka(e,w),c=tt(),{registerTimeout:m,removeTimeout:l}=Et(),{registerTimeout:s,removeTimeout:y}=Et(),r=d(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),h=d(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),v=[_(null),_(r.value)],p=_(0),I=_(!1),T=_(!1),Q=d(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),O=d(()=>({width:e.width,height:e.height})),Y=d(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),q=d(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function E(){if(y(),e.loadingShowDelay===0){I.value=!0;return}s(()=>{I.value=!0},e.loadingShowDelay)}function re(){y(),I.value=!1}function W({target:u}){gt(c)===!1&&(l(),w.value=u.naturalHeight===0?.5:u.naturalWidth/u.naturalHeight,G(u,1))}function G(u,M){M===1e3||gt(c)===!0||(u.complete===!0?ie(u):m(()=>{G(u,M+1)},50))}function ie(u){gt(c)!==!0&&(p.value=p.value^1,v[p.value].value=null,re(),u.getAttribute("__qerror")!=="true"&&(T.value=!1),n("load",u.currentSrc||u.src))}function ee(u){l(),re(),T.value=!0,v[p.value].value=h.value,v[p.value^1].value=r.value,n("error",u)}function ne(u){const M=v[u].value,i={key:"img_"+u,class:Y.value,style:q.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...M};return p.value===u?Object.assign(i,{class:i.class+"current",onLoad:W,onError:ee}):i.class+="loaded",x("div",{class:"q-img__container absolute-full",key:"img"+u},x("img",i))}function de(){return I.value===!1?x("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},kt(o[T.value===!0?"error":"default"])):x("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[x(Ql,{color:e.spinnerColor,size:e.spinnerSize})])}{let u=function(){we(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,M=>{l(),T.value=!1,M===null?(re(),v[p.value^1].value=r.value):E(),v[p.value].value=M},{immediate:!0})};Pl.value===!0?zt(u):u()}return()=>{const u=[];return V.value!==null&&u.push(x("div",{key:"filler",style:V.value})),v[0].value!==null&&u.push(ne(0)),v[1].value!==null&&u.push(ne(1)),u.push(x(jl,{name:"q-transition--fade"},de)),x("div",{key:"main",class:Q.value,style:O.value,role:"img","aria-label":e.alt},u)}}}),xa=_e({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(e){return()=>[x("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),x("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),wt(x("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),wt(x("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]}}),Gt=["vertical","horizontal"],pt={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Jt={prevent:!0,mouse:!0,mouseAllDir:!0},Zt=e=>e>=250?50:Math.ceil(e/5),Va=_e({name:"QScrollArea",props:{...ol,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:o,emit:n}){const w=_(!1),V=_(!1),c=_(!1),m={vertical:_(0),horizontal:_(0)},l={vertical:{ref:_(null),position:_(0),size:_(0)},horizontal:{ref:_(null),position:_(0),size:_(0)}},{proxy:s}=tt(),y=il(e,s.$q);let r=null,h;const v=_(null),p=d(()=>"q-scrollarea"+(y.value===!0?" q-scrollarea--dark":""));Object.assign(m,{verticalInner:d(()=>m.vertical.value-e.verticalOffset[0]-e.verticalOffset[1]),horizontalInner:d(()=>m.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1])}),l.vertical.percentage=d(()=>{const i=l.vertical.size.value-m.vertical.value;if(i<=0)return 0;const z=Je(l.vertical.position.value/i,0,1);return Math.round(z*1e4)/1e4}),l.vertical.thumbHidden=d(()=>(e.visible===null?c.value:e.visible)!==!0&&w.value===!1&&V.value===!1||l.vertical.size.value<=m.vertical.value+1),l.vertical.thumbStart=d(()=>e.verticalOffset[0]+l.vertical.percentage.value*(m.verticalInner.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=d(()=>Math.round(Je(m.verticalInner.value*m.verticalInner.value/l.vertical.size.value,Zt(m.verticalInner.value),m.verticalInner.value))),l.vertical.style=d(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`})),l.vertical.thumbClass=d(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=d(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=d(()=>{const i=l.horizontal.size.value-m.horizontal.value;if(i<=0)return 0;const z=Je(Math.abs(l.horizontal.position.value)/i,0,1);return Math.round(z*1e4)/1e4}),l.horizontal.thumbHidden=d(()=>(e.visible===null?c.value:e.visible)!==!0&&w.value===!1&&V.value===!1||l.horizontal.size.value<=m.horizontal.value+1),l.horizontal.thumbStart=d(()=>e.horizontalOffset[0]+l.horizontal.percentage.value*(m.horizontalInner.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=d(()=>Math.round(Je(m.horizontalInner.value*m.horizontalInner.value/l.horizontal.size.value,Zt(m.horizontalInner.value),m.horizontalInner.value))),l.horizontal.style=d(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[s.$q.lang.rtl===!0?"right":"left"]:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`})),l.horizontal.thumbClass=d(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=d(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const I=d(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle);function T(){const i={};return Gt.forEach(z=>{const f=l[z];Object.assign(i,{[z+"Position"]:f.position.value,[z+"Percentage"]:f.percentage.value,[z+"Size"]:f.size.value,[z+"ContainerSize"]:m[z].value,[z+"ContainerInnerSize"]:m[z+"Inner"].value})}),i}const Q=rl(()=>{const i=T();i.ref=s,n("scroll",i)},0);function O(i,z,f){if(Gt.includes(i)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(i==="vertical"?Pt:ht)(v.value,z,f)}function Y({height:i,width:z}){let f=!1;m.vertical.value!==i&&(m.vertical.value=i,f=!0),m.horizontal.value!==z&&(m.horizontal.value=z,f=!0),f===!0&&G()}function q({position:i}){let z=!1;l.vertical.position.value!==i.top&&(l.vertical.position.value=i.top,z=!0),l.horizontal.position.value!==i.left&&(l.horizontal.position.value=i.left,z=!0),z===!0&&G()}function E({height:i,width:z}){l.horizontal.size.value!==z&&(l.horizontal.size.value=z,G()),l.vertical.size.value!==i&&(l.vertical.size.value=i,G())}function re(i,z){const f=l[z];if(i.isFirst===!0){if(f.thumbHidden.value===!0)return;h=f.position.value,V.value=!0}else if(V.value!==!0)return;i.isFinal===!0&&(V.value=!1);const H=pt[z],B=(f.size.value-m[z].value)/(m[z+"Inner"].value-f.thumbSize.value),P=i.distance[H.dist],te=h+(i.direction===H.dir?1:-1)*P*B;ie(te,z)}function W(i,z){const f=l[z];if(f.thumbHidden.value!==!0){const H=z==="vertical"?e.verticalOffset[0]:e.horizontalOffset[0],B=i[pt[z].offset]-H,P=f.thumbStart.value-H;if(B<P||B>P+f.thumbSize.value){const te=B-f.thumbSize.value/2,a=Je(te/(m[z+"Inner"].value-f.thumbSize.value),0,1);ie(a*Math.max(0,f.size.value-m[z].value),z)}f.ref.value!==null&&f.ref.value.dispatchEvent(new MouseEvent(i.type,i))}}function G(){w.value=!0,r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,w.value=!1},e.delay),e.onScroll!==void 0&&Q()}function ie(i,z){v.value[pt[z].scroll]=i}let ee=null;function ne(){ee!==null&&clearTimeout(ee),ee=setTimeout(()=>{ee=null,c.value=!0},s.$q.platform.is.ios?50:0)}function de(){ee!==null&&(clearTimeout(ee),ee=null),c.value=!1}let u=null;we(()=>s.$q.lang.rtl,i=>{v.value!==null&&ht(v.value,Math.abs(l.horizontal.position.value)*(i===!0?-1:1))}),sl(()=>{u={top:l.vertical.position.value,left:l.horizontal.position.value}}),cl(()=>{if(u===null)return;const i=v.value;i!==null&&(ht(i,u.left),Pt(i,u.top))}),lt(Q.cancel),Object.assign(s,{getScrollTarget:()=>v.value,getScroll:T,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:O,setScrollPercentage(i,z,f){O(i,z*(l[i].size.value-m[i].value)*(i==="horizontal"&&s.$q.lang.rtl===!0?-1:1),f)}});const M={scroll:l,thumbVertDir:[[Wt,i=>{re(i,"vertical")},void 0,{vertical:!0,...Jt}]],thumbHorizDir:[[Wt,i=>{re(i,"horizontal")},void 0,{horizontal:!0,...Jt}]],onVerticalMousedown(i){W(i,"vertical")},onHorizontalMousedown(i){W(i,"horizontal")}};return()=>x("div",{class:p.value,onMouseenter:ne,onMouseleave:de},[x("div",{ref:v,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[x("div",{class:"q-scrollarea__content absolute",style:I.value},Ct(o.default,[x(Kt,{debounce:0,onResize:E})])),x(Jl,{axis:"both",onScroll:q})]),x(Kt,{debounce:0,onResize:Y}),x(xa,{store:M,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}});function qa(e=180){const o=_(e),n=_(null),w=_(0);function V(r=1){w.value+=r}function c(){w.value=0}const m=d(()=>{const r=Math.floor(o.value/60),h=o.value%60;return`${r}:${h.toString().padStart(2,"0")}`});function l(){n.value||(n.value=setInterval(()=>{o.value>0?o.value--:(clearInterval(n.value),n.value=null,console.log("Time is up!"))},1e3))}function s(){n.value&&(clearInterval(n.value),n.value=null)}function y(){s(),o.value=e,c(),l()}return lt(()=>{s()}),{gameTime:o,score:w,formattedTime:m,addScore:V,resetTimer:y,startTimer:l,stopTimer:s}}function Ia(e,o=[]){const n=_(o),w=_("collision"),V=_(1),c=_(null),m=_([]),l=_(null),s=_([]),y=_(null),r=_(""),h=_(""),v=_(!1),p=d(()=>{const u={};return h.value&&(u.backgroundImage=`url('${h.value}')`),u}),I=d(()=>s.value.map(u=>({label:u.name,value:u.id})));we(y,u=>{if(u){const M=s.value.find(i=>i.id===u);M&&(r.value=M.name,h.value=M.background_image_url||"")}else r.value="",h.value=""}),we(m,async()=>{await ze(),l.value&&(l.value.scrollTop=l.value.scrollHeight)},{deep:!0});function T(u,M="info"){const i=new Date,z=`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}:${i.getSeconds().toString().padStart(2,"0")}`;m.value.push({timestamp:z,message:u,type:M})}function Q(){m.value=[]}async function O(){try{const u=localStorage.getItem("authToken")||"dummy-token",M=await ot.get("/api/vue-game/food-running/templates",{headers:{Authorization:`Bearer ${u}`}});s.value=M.data,T("成功載入地圖模板列表","system")}catch(u){console.error("Failed to fetch map templates:",u),e.notify({color:"negative",message:"載入地圖模板列表失敗"})}}async function Y(){if(y.value)try{const u=localStorage.getItem("authToken")||"dummy-token",i=(await ot.get(`/api/vue-game/food-running/templates/${y.value}`,{headers:{Authorization:`Bearer ${u}`}})).data;n.value=i.obstacles||[],r.value=i.name,h.value=i.background_image_url||"",n.value.length>0?V.value=Math.max(...n.value.map(z=>z.id))+1:V.value=1,T(`成功載入地圖: ${i.name}`,"system"),e.notify({color:"positive",message:`已成功載入地圖 '${i.name}'`})}catch(u){console.error("Failed to load map template:",u),e.notify({color:"negative",message:"載入地圖失敗"})}}async function q(){if(!r.value){e.notify({color:"warning",message:"請輸入模板名稱"});return}try{const u=localStorage.getItem("authToken")||"dummy-token",M={name:r.value,obstacles:n.value,background_image_url:h.value},i=await ot.post("/api/vue-game/food-running/templates",M,{headers:{Authorization:`Bearer ${u}`}});T(`地圖已儲存為: ${i.data.template.name}`,"system"),e.notify({color:"positive",message:"地圖儲存成功！"}),await O(),y.value=i.data.template.id}catch(u){console.error("Failed to save map template:",u);const M=u.response?.data?.error||"儲存地圖失敗";e.notify({color:"negative",message:M})}}function E(u){y.value=u,Y(),v.value=!1}function re(u,M){e.dialog({title:"確認刪除",message:`您確定要刪除地圖範本 "${M}" (ID: ${u}) 嗎？此操作無法復原。`,cancel:!0,persistent:!0,ok:{color:"negative",label:"確定刪除"}}).onOk(()=>{W(u)})}async function W(u){try{const M=localStorage.getItem("authToken")||"dummy-token";await ot.delete(`/api/vue-game/food-running/templates/${u}`,{headers:{Authorization:`Bearer ${M}`}}),e.notify({color:"positive",message:"範本已成功刪除"}),await O(),y.value===u&&(y.value=null)}catch(M){console.error("Failed to delete map template:",M),e.notify({color:"negative",message:"刪除範本失敗"})}}function G(u){const M=u.currentTarget.getBoundingClientRect(),i=.5,z=(u.clientX-M.left)/i,f=(u.clientY-M.top)/i,H=40,B=Math.round(z/H)*H,P=Math.round(f/H)*H;n.value.push({id:V.value,x:B,y:P,type:w.value}),V.value++}function ie(){const u=Math.floor(Math.random()*900)+50,M=Math.floor(Math.random()*900)+50;n.value.push({id:V.value,x:u,y:M,type:w.value}),V.value++}function ee(u){n.value.splice(u,1)}function ne(){n.value=[],V.value=1,T("所有障礙物已被清除","system")}function de(){const u=n.value.map(i=>({id:i.id,x:i.x,y:i.y,type:i.type})),M=JSON.stringify(u,null,2);navigator.clipboard.writeText(M).then(()=>{e.notify({message:"障礙物數據已複製到剪貼簿！",color:"positive",icon:"content_copy"})}).catch(i=>{e.notify({message:"複製失敗，請手動複製。",color:"negative",icon:"report_problem"}),console.error("複製失敗:",i)})}return{obstacles:n,brushType:w,nextObstacleId:V,activeTriggerId:c,eventLogs:m,logConsole:l,mapTemplates:s,selectedTemplateId:y,templateName:r,mapBackgroundImageUrl:h,isTemplateManagerOpen:v,gameWorldStyle:p,mapTemplateOptions:I,addLog:T,clearLogs:Q,fetchMapTemplates:O,loadMapTemplate:Y,saveMapTemplate:q,loadTemplateAndClose:E,confirmDeleteTemplate:re,deleteTemplate:W,handlePlanningMapClick:G,addObstacle:ie,removeObstacle:ee,clearObstacles:ne,copyObstaclesData:de}}const Ne=48,We=38,it=40,ut=40,el=1e3,tl=1e3;function Ta(e,o,n,w){const V=_(null),c=_(null),m=_(null),l=_(null),s=Ye({x:150,y:150}),y=Ye({direction:null,baseSpeed:1.5,acceleration:.1,maxSpeed:4,currentSpeed:1.5}),r=_(Ze),h=Ye({ArrowLeft:!1,ArrowRight:!1,ArrowUp:!1,ArrowDown:!1}),v=Ye({visible:!1,message:"",timer:null}),p=_(!1);let I=null;const T=Ye({x:0,y:0,zoom:1});function Q(f,H){const B={left:f-Ne/2,right:f+Ne/2,top:H-We/2,bottom:H+We/2};for(const P of e.value.filter(te=>te.type==="collision")){const te={left:P.x-it/2,right:P.x+it/2,top:P.y-ut/2,bottom:P.y+ut/2};if(B.left<te.right&&B.right>te.left&&B.top<te.bottom&&B.bottom>te.top)return!0}return!1}function O(){const f={left:s.x-Ne/2,right:s.x+Ne/2,top:s.y-We/2,bottom:s.y+We/2};let H=null;for(const B of e.value.filter(P=>P.type==="trigger")){const P={left:B.x-it/2,right:B.x+it/2,top:B.y-ut/2,bottom:B.y+ut/2};if(f.left<P.right&&f.right>P.left&&f.top<P.bottom&&f.bottom>P.top){H=B.id;break}}if(H!==o.value){const B=o.value;B!==null&&n(`離開觸發區 #${B}`,"leave"),H!==null&&n(`進入觸發區 #${H}`,"enter"),o.value=H}}function Y(f,H){s.x=Math.max(0+Ne/2,Math.min(el-Ne/2,f)),s.y=Math.max(0+We/2,Math.min(tl-We/2,H))}function q(f){switch(y.direction=f,f){case"left":r.value=na;break;case"right":r.value=oa;break;case"up":r.value=ia;break;case"down":r.value=Ze;break}p.value||(p.value=!0,re())}function E(){if(y.direction){y.currentSpeed=Math.min(y.maxSpeed,y.currentSpeed+y.acceleration);let f=s.x,H=s.y;switch(y.direction){case"left":f-=y.currentSpeed;break;case"right":f+=y.currentSpeed;break;case"up":H-=y.currentSpeed;break;case"down":H+=y.currentSpeed;break}let B=s.x,P=s.y;Q(f,s.y)||(B=f),Q(B,H)||(P=H),Y(B,P),G(),O()}else{y.currentSpeed=y.baseSpeed,p.value=!1;return}I=requestAnimationFrame(E)}function re(){I&&cancelAnimationFrame(I),I=requestAnimationFrame(E)}function W(){I&&(cancelAnimationFrame(I),I=null),p.value=!1,y.currentSpeed=y.baseSpeed}function G(){if(!m.value)return;const f=m.value.clientWidth,H=m.value.clientHeight;let B=-s.x+f/2,P=-s.y+H/2;const te=f-el*T.zoom,a=H-tl*T.zoom;T.x=Math.min(0,Math.max(te,B)),T.y=Math.min(0,Math.max(a,P)),ie()}function ie(){c.value&&(c.value.style.transform=`translate(${T.x}px, ${T.y}px) scale(${T.zoom})`),V.value&&(V.value.style.left=`${s.x}px`,V.value.style.top=`${s.y}px`)}function ee(){T.zoom=1,s.x=150,s.y=150,r.value=Ze,y.direction=null,y.currentSpeed=y.baseSpeed,W(),Object.keys(h).forEach(f=>{h[f]=!1}),G()}function ne(f){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(f.key)&&(f.preventDefault(),h[f.key]=!0,h.ArrowLeft?q("left"):h.ArrowRight?q("right"):h.ArrowUp?q("up"):h.ArrowDown&&q("down"))}function de(f){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(f.key)&&(f.preventDefault(),h[f.key]=!1,Object.values(h).some(B=>B)?h.ArrowLeft?q("left"):h.ArrowRight?q("right"):h.ArrowUp?q("up"):h.ArrowDown&&q("down"):(y.direction=null,r.value=Ze,W()))}function u(){if(!l.value)return;const f={zone:l.value,mode:"static",position:{left:"50%",top:"50%"},color:"blue",size:100},H=aa.create(f);H.on("move",(B,P)=>{P.direction&&q(P.direction.angle)}),H.on("end",()=>{y.direction=null,r.value=Ze,W()})}function M(){window.addEventListener("keydown",ne),window.addEventListener("keyup",de),w.platform.is.mobile&&l.value&&u()}function i(){window.removeEventListener("keydown",ne),window.removeEventListener("keyup",de),W()}function z(){v.message="HI",v.visible=!0,v.timer&&clearTimeout(v.timer),v.timer=setTimeout(()=>{v.visible=!1},2e3)}return zt(()=>{M(),ee()}),lt(()=>{i()}),{player:V,gameWorld:c,cameraContainer:m,joystickZone:l,playerPosition:s,currentSprite:r,playerSpeech:v,cameraState:T,sayHi:z}}function Aa(e){const o=_(Array(6).fill(null)),n=_(-1);function w(l){const s=o.value.findIndex(y=>!y);return s!==-1?(o.value[s]=l,!0):!1}function V(l){n.value=n.value===l?-1:l,o.value[l]&&e(`選擇了道具: ${o.value[l].name}`,"system")}function c(){const l=["restaurant","local_pizza","cake","local_cafe","fastfood","local_bar","icecream","set_meal","bakery_dining","brunch_dining","lunch_dining","dinner_dining"],y={icon:l[Math.floor(Math.random()*l.length)],name:`料理 ${Math.floor(Math.random()*100)+1}`};w(y)?e(`添加了隨機道具: ${y.name}`,"system"):e("道具欄已滿，無法添加","system")}function m(){o.value.fill(null),n.value=-1,e("道具欄已清空","system")}return{inventory:o,selectedInventorySlot:n,selectInventorySlot:V,addRandomItem:c,clearInventory:m}}const Ma={class:"dev-button-container"},Oa={class:"game-stats-container"},Ba={class:"score-container"},$a={key:0,class:"speech-bubble"},Ha={key:0,class:"mobile-controls-container q-mt-md"},Da={class:"action-button-zone"},Fa={class:"minimap-container q-mt-md"},La={class:"inventory-container"},Ra=["onClick"],Ea={key:0,class:"separator"},Pa={key:1,class:"right-area"},ja={class:"dev-controls"},Qa={class:"row q-col-gutter-sm"},Na={class:"col-12"},Wa={class:"col-12"},Ka={class:"row q-col-gutter-sm"},Ua={class:"col-12"},Xa={class:"col-12"},Ya={class:"map-planning-area q-mt-md"},Ga={class:"q-mb-md"},Ja={class:"row q-col-gutter-sm items-center"},Za={class:"col-8"},en={class:"col-4"},tn={class:"row q-col-gutter-sm items-center q-mt-sm"},ln={class:"col-8"},an={class:"col-4"},nn={class:"row q-col-gutter-sm items-center q-mt-sm"},on={class:"col-8"},un={class:"row q-mt-sm"},rn={class:"col-12"},sn={class:"row q-col-gutter-sm q-mb-sm"},cn={class:"col-6"},dn={class:"col-6"},vn={class:"row q-col-gutter-sm q-mb-sm"},fn={class:"col-12"},mn={class:"map-planning-container"},gn=["onClick","title"],hn={class:"obstacle-number"},yn={class:"event-log-area q-mt-md"},Sn={class:"row items-center justify-between q-mb-sm"},bn={class:"log-timestamp"},pn={key:0,class:"log-placeholder"},wn={class:"row q-col-gutter-md"},_n={class:"absolute-bottom-left custom-caption"},kn=["title"],Cn={key:0,class:"col-12 text-center text-grey q-pa-lg"},qe=.18,zn=Object.assign({name:"FoodRunningPage"},{__name:"FoodRunningPage",setup(e){const o=ta(),{gameTime:n,score:w,formattedTime:V,addScore:c,resetTimer:m,startTimer:l}=qa(180),{obstacles:s,brushType:y,activeTriggerId:r,eventLogs:h,logConsole:v,mapTemplates:p,selectedTemplateId:I,templateName:T,mapBackgroundImageUrl:Q,isTemplateManagerOpen:O,gameWorldStyle:Y,mapTemplateOptions:q,addLog:E,clearLogs:re,fetchMapTemplates:W,loadMapTemplate:G,saveMapTemplate:ie,loadTemplateAndClose:ee,confirmDeleteTemplate:ne,handlePlanningMapClick:de,addObstacle:u,removeObstacle:M,clearObstacles:i,copyObstaclesData:z}=Ia(o,[]),{player:f,gameWorld:H,cameraContainer:B,joystickZone:P,playerPosition:te,currentSprite:a,playerSpeech:g,cameraState:$,sayHi:K}=Ta(s,r,E,o),{inventory:J,selectedInventorySlot:N,selectInventorySlot:L,addRandomItem:le,clearInventory:F}=Aa(E),Z=_(!0),Se=d(()=>({width:Z.value?"350px":"100%",flex:Z.value?"none":"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:(Z.value,"flex-start")})),Be=d(()=>({width:"330px",margin:"0 auto"})),ge=d(()=>({width:"180px",height:"180px"})),$e=d(()=>({left:`${te.x*qe}px`,top:`${te.y*qe}px`})),ke=d(()=>{if(!B.value)return{};const be=B.value.clientWidth,D=B.value.clientHeight,k=-$.x,fe=-$.y,me=k*qe,ve=fe*qe,xe=be/$.zoom*qe,He=D/$.zoom*qe;return{left:`${me}px`,top:`${ve}px`,width:`${xe}px`,height:`${He}px`}});function Ce(){Z.value=!Z.value}return zt(async()=>{l(),await W();const be=3;p.value.find(k=>k.id===be)?(I.value=be,await G()):p.value.length>0?(I.value=p.value[0].id,await G()):E("資料庫中沒有可用的地圖","system")}),(be,D)=>(oe(),ue(Ae,null,[j(ea,{class:"flex row"},{default:pe(()=>[C("div",{class:"left-area",style:he(Se.value)},[C("div",Ma,[j(ce,{round:"",size:"sm",color:"primary",icon:"code",onClick:Ce,class:"dev-mode-toggle",title:Z.value?"隱藏開發區":"顯示開發區"},null,8,["title"])]),C("div",Oa,[C("div",Ba,[j(rt,{name:"restaurant",size:"20px",class:"q-mr-xs"}),C("span",null,Ve(A(w)),1)]),C("div",{class:je(["timer",{"timer-warning":A(n)<=30}])},Ve(A(V)),3)]),C("div",{class:"camera-test-container q-mt-lg",ref_key:"cameraContainer",ref:B,style:he(Be.value)},[C("div",{class:"game-world",ref_key:"gameWorld",ref:H,style:he(A(Y))},[C("div",{class:"player",ref_key:"player",ref:f},[A(g).visible?(oe(),ue("div",$a,Ve(A(g).message),1)):Me("",!0),j(la,{spriteSheet:A(a),frameWidth:48,frameHeight:38,totalFrames:4,animationDuration:"1s",scale:2},null,8,["spriteSheet"])],512),(oe(!0),ue(Ae,null,Qe(A(s),k=>(oe(),ue("div",{class:je(["obstacle",`obstacle-${k.type}`]),key:k.id,style:he({left:`${k.x}px`,top:`${k.y}px`})},null,6))),128))],4)],4),A(o).platform.is.mobile?(oe(),ue("div",Ha,[C("div",{ref_key:"joystickZone",ref:P,class:"joystick-zone"},null,512),C("div",Da,[j(ce,{round:"",color:"red",icon:"campaign",onClick:A(K),size:"lg",push:""},null,8,["onClick"])])])):Me("",!0),C("div",Fa,[C("div",La,[(oe(),ue(Ae,null,Qe(6,k=>C("div",{key:k,class:je(["inventory-slot",{selected:A(N)===k-1}]),onClick:fe=>A(L)(k-1)},[A(J)[k-1]?.icon?(oe(),Nl(rt,{key:0,name:A(J)[k-1].icon,size:"24px",class:"inventory-item"},null,8,["name"])):Me("",!0)],10,Ra)),64))]),C("div",{class:"minimap",style:he(ge.value)},[C("div",{class:"minimap-world",style:he(A(Y))},[(oe(!0),ue(Ae,null,Qe(A(s),k=>(oe(),ue("div",{class:je(["minimap-obstacle",`obstacle-${k.type}`]),key:k.id,style:he({left:`${k.x*qe}px`,top:`${k.y*qe}px`})},null,6))),128)),C("div",{class:"minimap-player",style:he($e.value)},null,4),C("div",{class:"viewport-rect",style:he(ke.value)},null,4)],4)],4)])],4),Z.value?(oe(),ue("div",Ea)):Me("",!0),Z.value?(oe(),ue("div",Pa,[C("div",ja,[D[8]||(D[8]=C("h5",{class:"q-mt-none q-mb-md"},"開發控制",-1)),C("div",Qa,[C("div",Na,[j(ce,{color:"negative",icon:"restart_alt",label:"重置計時器",onClick:A(m),class:"full-width"},null,8,["onClick"])]),C("div",Wa,[j(ce,{color:"positive",icon:"add",label:"增加10分",onClick:D[0]||(D[0]=k=>A(c)(10)),class:"full-width"})])]),D[9]||(D[9]=C("h5",{class:"q-mt-md q-mb-md"},"道具欄測試",-1)),C("div",Ka,[C("div",Ua,[j(ce,{color:"primary",icon:"add_circle",label:"添加隨機道具",onClick:A(le),class:"full-width q-mb-sm"},null,8,["onClick"])]),C("div",Xa,[j(ce,{color:"warning",icon:"delete",label:"清空道具欄",onClick:A(F),class:"full-width"},null,8,["onClick"])])])]),C("div",Ya,[D[11]||(D[11]=C("h5",{class:"q-mt-none q-mb-md"},"地圖規劃",-1)),C("div",Ga,[C("div",Ja,[C("div",Za,[j(ba,{dense:"",outlined:"",modelValue:A(I),"onUpdate:modelValue":D[1]||(D[1]=k=>Ge(I)?I.value=k:null),options:A(q),label:"選擇地圖模板","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"])]),C("div",en,[j(ce,{color:"secondary",label:"載入",onClick:A(G),class:"full-width",disable:!A(I)},null,8,["onClick","disable"])])]),C("div",tn,[C("div",ln,[j(jt,{dense:"",outlined:"",modelValue:A(T),"onUpdate:modelValue":D[2]||(D[2]=k=>Ge(T)?T.value=k:null),label:"儲存為新模板名稱",clearable:""},null,8,["modelValue"])]),C("div",an,[j(ce,{color:"primary",label:"儲存",onClick:A(ie),class:"full-width",disable:!A(T)},null,8,["onClick","disable"])])]),C("div",nn,[C("div",on,[j(ce,{color:"grey-7",label:"管理範本",onClick:D[3]||(D[3]=k=>O.value=!0),class:"full-width",icon:"folder_open"})])]),C("div",un,[C("div",rn,[j(jt,{dense:"",outlined:"",modelValue:A(Q),"onUpdate:modelValue":D[4]||(D[4]=k=>Ge(Q)?Q.value=k:null),label:"地圖背景圖片網址",clearable:""},null,8,["modelValue"])])])]),j(pa,{modelValue:A(y),"onUpdate:modelValue":D[5]||(D[5]=k=>Ge(y)?y.value=k:null),push:"",glossy:"","toggle-color":"primary",class:"full-width q-mb-md",options:[{label:"牆壁 (碰撞)",value:"collision",color:"indigo"},{label:"觸發區 (事件)",value:"trigger",color:"red"}]},null,8,["modelValue"]),C("div",sn,[C("div",cn,[j(ce,{color:"primary",icon:"add_box",label:"隨機添加物件",onClick:A(u),class:"full-width"},null,8,["onClick"])]),C("div",dn,[j(ce,{color:"negative",icon:"delete_sweep",label:"清除障礙物",onClick:A(i),class:"full-width"},null,8,["onClick"])])]),C("div",vn,[C("div",fn,[j(ce,{color:"secondary",icon:"content_copy",label:"複製障礙物數據",onClick:A(z),class:"full-width"},null,8,["onClick"])])]),C("div",mn,[C("div",{class:"planning-map",onClick:D[6]||(D[6]=(...k)=>A(de)&&A(de)(...k)),style:he(A(Y))},[D[10]||(D[10]=C("div",{class:"planning-grid"},null,-1)),(oe(!0),ue(Ae,null,Qe(A(s),(k,fe)=>(oe(),ue("div",{class:je(["planning-obstacle",k.type]),key:k.id,style:he({left:`${k.x}px`,top:`${k.y}px`}),onClick:Wl(me=>A(M)(fe),["stop"]),title:`#${k.id} - ${k.type} (${Math.round(k.x)}, ${Math.round(k.y)})`},[C("span",hn,Ve(k.id),1)],14,gn))),128))],4)])]),C("div",yn,[C("div",Sn,[D[12]||(D[12]=C("h5",{class:"q-mt-none q-mb-none"},"事件紀錄",-1)),j(ce,{color:"grey",size:"sm",icon:"delete_sweep",onClick:A(re),flat:"",dense:"",label:"清除"},null,8,["onClick"])]),C("div",{class:"log-console",ref_key:"logConsole",ref:v},[(oe(!0),ue(Ae,null,Qe(A(h),(k,fe)=>(oe(),ue("div",{key:fe,class:"log-entry"},[C("span",bn,"["+Ve(k.timestamp)+"]",1),C("span",{class:je(["log-message",`log-${k.type}`])},Ve(k.message),3)]))),128)),A(h).length===0?(oe(),ue("div",pn," 尚無事件紀錄... ")):Me("",!0)],512)])])):Me("",!0)]),_:1}),j(vl,{modelValue:A(O),"onUpdate:modelValue":D[7]||(D[7]=k=>Ge(O)?O.value=k:null),"full-width":""},{default:pe(()=>[j(Qt,null,{default:pe(()=>[j(yt,{class:"row items-center q-pb-none"},{default:pe(()=>[D[13]||(D[13]=C("div",{class:"text-h6"},"管理地圖範本",-1)),j(wa),wt(j(ce,{icon:"close",flat:"",round:"",dense:""},null,512),[[Zl]])]),_:1,__:[13]}),j(yt,null,{default:pe(()=>[j(Va,{style:{height:"70vh"}},{default:pe(()=>[C("div",wn,[(oe(!0),ue(Ae,null,Qe(A(p),k=>(oe(),ue("div",{key:k.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[j(Qt,{class:"template-card"},{default:pe(()=>[j(za,{src:k.background_image_url||A(ua),ratio:16/9,fit:"cover",class:"template-card-image"},{default:pe(()=>[C("div",_n," ID: "+Ve(k.id),1)]),_:2},1032,["src"]),j(yt,null,{default:pe(()=>[C("div",{class:"text-subtitle1 ellipsis",title:k.name},Ve(k.name),9,kn)]),_:2},1024),j(Kl),j(Ul,{align:"right"},{default:pe(()=>[j(ce,{flat:"",round:"",color:"secondary",icon:"download",onClick:fe=>A(ee)(k.id),title:"載入此範本"},null,8,["onClick"]),j(ce,{flat:"",round:"",color:"negative",icon:"delete",onClick:fe=>A(ne)(k.id,k.name),title:"刪除此範本"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),A(p).length===0?(oe(),ue("div",Cn,[j(rt,{name:"info",size:"2rem",class:"q-mb-sm"}),D[14]||(D[14]=C("div",null,"尚無任何已儲存的範本",-1))])):Me("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),En=ra(zn,[["__scopeId","data-v-79370e0a"]]);export{En as default};
